<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRAAP Test Challenge</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        .source-content {
            white-space: pre-wrap; /* Allows for line breaks in the text */
        }
        .feedback-correct {
            border-left: 5px solid #22c55e; /* green-500 */
        }
        .feedback-incorrect {
            border-left: 5px solid #ef4444; /* red-500 */
        }
        .language-btn.active {
            background-color: #3b82f6; /* blue-500 */
            color: white;
            font-weight: 600;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800 transition-colors duration-300">

    <div id="app" class="container mx-auto p-4 md:p-8 max-w-4xl">

        <!-- Header -->
        <header class="text-center mb-6">
            <h1 data-key="title" class="text-3xl md:text-4xl font-bold text-gray-700">CRAAP Test Challenge</h1>
            <p data-key="subtitle" class="text-md text-gray-500 mt-1">Evaluate the sources to test your media literacy skills!</p>
        </header>

        <!-- Language and Score Bar -->
        <div class="flex justify-between items-center bg-white p-3 rounded-lg shadow-md mb-6 sticky top-2 z-10">
            <div>
                <button onclick="setLanguage('en')" class="language-btn active text-sm font-medium py-1 px-3 rounded-md transition-colors hover:bg-blue-100" id="lang-en">EN</button>
                <button onclick="setLanguage('zh')" class="language-btn text-sm font-medium py-1 px-3 rounded-md transition-colors hover:bg-blue-100" id="lang-zh">ä¸­æ–‡</button>
                <button onclick="setLanguage('tr')" class="language-btn text-sm font-medium py-1 px-3 rounded-md transition-colors hover:bg-blue-100" id="lang-tr">TR</button>
            </div>
            <div class="text-lg font-semibold">
                <span data-key="score_label">Score</span>: <span id="score" class="text-blue-600">0</span>
            </div>
        </div>

        <!-- Main Game Area -->
        <main id="game-area" class="bg-white p-6 rounded-lg shadow-lg">
            
            <!-- Source Display -->
            <div id="source-container" class="mb-8 border-b pb-6">
                 <h2 data-key="source_title" class="text-2xl font-bold mb-3 text-gray-800">Source to Evaluate</h2>
                <div class="bg-gray-50 p-4 rounded-md border">
                    <h3 id="source-title" class="text-xl font-semibold text-blue-700 mb-2"></h3>
                    <p id="source-author" class="text-sm text-gray-500 mb-2"></p>
                    <p id="source-content" class="source-content text-gray-700 leading-relaxed"></p>
                </div>
            </div>

            <!-- Questions -->
            <div id="questions-container">
                <!-- Questions will be dynamically inserted here -->
            </div>

            <!-- Buttons -->
            <div id="button-container" class="mt-8 text-center">
                <button id="submit-btn" onclick="checkAnswers()" class="bg-blue-500 text-white font-bold py-3 px-8 rounded-lg shadow-md hover:bg-blue-600 transition-transform transform hover:scale-105 disabled:bg-gray-300 disabled:cursor-not-allowed disabled:scale-100">
                    <span data-key="submit_btn">Check Answers</span>
                </button>
                <button id="next-btn" onclick="nextSource()" class="hidden bg-green-500 text-white font-bold py-3 px-8 rounded-lg shadow-md hover:bg-green-600 transition-transform transform hover:scale-105">
                    <span data-key="next_btn">Next Source</span>
                </button>
            </div>
        </main>
        
        <!-- Final Score / Restart Screen -->
        <div id="final-screen" class="hidden text-center bg-white p-8 rounded-lg shadow-lg">
            <h2 data-key="final_title" class="text-3xl font-bold mb-4 text-gray-800">Challenge Complete!</h2>
            <p data-key="final_score_label" class="text-xl mb-2 text-gray-600">Your final score is:</p>
            <p id="final-score" class="text-5xl font-bold text-blue-600 mb-8"></p>
            <p id="final-feedback" class="text-lg mb-8"></p>
            <button onclick="restartGame()" class="bg-blue-500 text-white font-bold py-3 px-10 rounded-lg shadow-md hover:bg-blue-600 transition-transform transform hover:scale-105">
                <span data-key="restart_btn">Play Again</span>
            </button>
        </div>

    </div>

    <script>
        // --- TRANSLATIONS ---
        const translations = {
            en: {
                title: "CRAAP Test Challenge",
                subtitle: "Evaluate the sources to test your media literacy skills!",
                score_label: "Score",
                source_title: "Source to Evaluate",
                submit_btn: "Check Answers",
                next_btn: "Next Source",
                feedback_correct: "Correct!",
                feedback_incorrect: "Not quite.",
                final_title: "Challenge Complete!",
                final_score_label: "Your final score is:",
                restart_btn: "Play Again",
                final_feedback_excellent: "Excellent work! You're a critical thinking superstar! ðŸŒŸ",
                final_feedback_good: "Great job! You have a solid understanding of how to evaluate sources.",
                final_feedback_average: "Good effort! Keep practicing to sharpen your skills.",
                final_feedback_needs_improvement: "You're just getting started. Review the feedback and try again!",
                craap: {
                    C: "Currency",
                    R: "Relevance",
                    A: "Authority",
                    P1: "Accuracy",
                    P2: "Purpose",
                },
                questions: {
                    C: "How timely is this information?",
                    R: "How relevant is this information to a project on climate change solutions?",
                    A: "Who is the author or publisher of this information?",
                    P1: "How accurate and reliable is this information?",
                    P2: "What is the primary purpose of this information?"
                }
            },
            zh: {
                title: "CRAAP æµ‹è¯•æŒ‘æˆ˜",
                subtitle: "è¯„ä¼°ä¿¡æ¯æ¥æºï¼Œæµ‹è¯•æ‚¨çš„åª’ä½“ç´ å…»æŠ€èƒ½ï¼",
                score_label: "åˆ†æ•°",
                source_title: "å¾…è¯„ä¼°æ¥æº",
                submit_btn: "æ£€æŸ¥ç­”æ¡ˆ",
                next_btn: "ä¸‹ä¸€ä¸ªæ¥æº",
                feedback_correct: "æ­£ç¡®ï¼",
                feedback_incorrect: "ä¸å®Œå…¨æ­£ç¡®ã€‚",
                final_title: "æŒ‘æˆ˜å®Œæˆï¼",
                final_score_label: "æ‚¨çš„æœ€ç»ˆåˆ†æ•°æ˜¯ï¼š",
                restart_btn: "å†çŽ©ä¸€æ¬¡",
                final_feedback_excellent: "éžå¸¸æ£’ï¼ä½ æ˜¯ä¸€ä½æ‰¹åˆ¤æ€§æ€ç»´çš„è¶…çº§å·¨æ˜Ÿï¼ðŸŒŸ",
                final_feedback_good: "åšå¾—å¾ˆå¥½ï¼æ‚¨å¯¹å¦‚ä½•è¯„ä¼°æ¥æºæœ‰æ‰Žå®žçš„ç†è§£ã€‚",
                final_feedback_average: "åšå¾—ä¸é”™ï¼ç»§ç»­ç»ƒä¹ ä»¥æé«˜æ‚¨çš„æŠ€èƒ½ã€‚",
                final_feedback_needs_improvement: "ä½ æ‰åˆšåˆšå¼€å§‹ã€‚æŸ¥çœ‹åé¦ˆå¹¶å†è¯•ä¸€æ¬¡ï¼",
                craap: {
                    C: "æ—¶æ•ˆæ€§ (Currency)",
                    R: "ç›¸å…³æ€§ (Relevance)",
                    A: "æƒå¨æ€§ (Authority)",
                    P1: "å‡†ç¡®æ€§ (Accuracy)",
                    P2: "ç›®çš„æ€§ (Purpose)",
                },
                questions: {
                    C: "è¿™æ¡ä¿¡æ¯æœ‰å¤šåŠæ—¶ï¼Ÿ",
                    R: "è¿™æ¡ä¿¡æ¯ä¸Žä¸€ä¸ªå…³äºŽæ°”å€™å˜åŒ–è§£å†³æ–¹æ¡ˆçš„é¡¹ç›®æœ‰å¤šå¤§å…³ç³»ï¼Ÿ",
                    A: "è¿™æ¡ä¿¡æ¯çš„ä½œè€…æˆ–å‘å¸ƒè€…æ˜¯è°ï¼Ÿ",
                    P1: "è¿™æ¡ä¿¡æ¯æœ‰å¤šå‡†ç¡®å’Œå¯é ï¼Ÿ",
                    P2: "è¿™æ¡ä¿¡æ¯çš„ä¸»è¦ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ"
                }
            },
            tr: {
                title: "CRAAP Testi MÃ¼cadelesi",
                subtitle: "Medya okuryazarlÄ±ÄŸÄ± becerilerinizi test etmek iÃ§in kaynaklarÄ± deÄŸerlendirin!",
                score_label: "Puan",
                source_title: "DeÄŸerlendirilecek Kaynak",
                submit_btn: "CevaplarÄ± Kontrol Et",
                next_btn: "Sonraki Kaynak",
                feedback_correct: "DoÄŸru!",
                feedback_incorrect: "Tam olarak deÄŸil.",
                final_title: "MÃ¼cadele TamamlandÄ±!",
                final_score_label: "Nihai puanÄ±nÄ±z:",
                restart_btn: "Tekrar Oyna",
                final_feedback_excellent: "MÃ¼kemmel iÅŸ! Sen bir eleÅŸtirel dÃ¼ÅŸÃ¼nme sÃ¼perstarÄ±sÄ±n! ðŸŒŸ",
                final_feedback_good: "Harika iÅŸ! KaynaklarÄ± nasÄ±l deÄŸerlendireceÄŸinize dair saÄŸlam bir anlayÄ±ÅŸa sahipsiniz.",
                final_feedback_average: "Ä°yi Ã§aba! Becerilerinizi geliÅŸtirmek iÃ§in pratik yapmaya devam edin.",
                final_feedback_needs_improvement: "Daha yeni baÅŸlÄ±yorsun. Geri bildirimi inceleyin ve tekrar deneyin!",
                craap: {
                    C: "GÃ¼ncellik (Currency)",
                    R: "Ä°lgi (Relevance)",
                    A: "Otorite (Authority)",
                    P1: "DoÄŸruluk (Accuracy)",
                    P2: "AmaÃ§ (Purpose)",
                },
                questions: {
                    C: "Bu bilgi ne kadar gÃ¼ncel?",
                    R: "Bu bilgi iklim deÄŸiÅŸikliÄŸi Ã§Ã¶zÃ¼mleri Ã¼zerine bir projeyle ne kadar alakalÄ±?",
                    A: "Bu bilginin yazarÄ± veya yayÄ±ncÄ±sÄ± kim?",
                    P1: "Bu bilgi ne kadar doÄŸru ve gÃ¼venilir?",
                    P2: "Bu bilginin temel amacÄ± nedir?"
                }
            }
        };

        // --- GAME DATA ---
        const gameData = [
            {
                id: 1,
                title: { en: "ScienceKids Journal: The Power of Solar", zh: "ç§‘å­¦å„¿ç«¥æ‚å¿—ï¼šå¤ªé˜³èƒ½çš„åŠ›é‡", tr: "ScienceKids Dergisi: GÃ¼neÅŸin GÃ¼cÃ¼" },
                author: { en: "By Dr. Evelyn Reed, Climatologist at Stanford University. Published: Last Month", zh: "ä½œè€…ï¼šä¼ŠèŠ™ç³Â·é‡Œå¾·åšå£«ï¼Œæ–¯å¦ç¦å¤§å­¦æ°”å€™å­¦å®¶ã€‚å‘è¡¨æ—¶é—´ï¼šä¸Šä¸ªæœˆ", tr: "Yazan: Dr. Evelyn Reed, Stanford Ãœniversitesi Klimatolog. YayÄ±nlanma: GeÃ§en Ay" },
                content: { en: "Our latest research confirms that new-generation solar panels are 30% more efficient than models from just five years ago. These advancements make solar power a leading contender for solving the global energy crisis. Our data, peer-reviewed and published in Nature, shows a clear path forward.", zh: "æˆ‘ä»¬æœ€æ–°çš„ç ”ç©¶è¯å®žï¼Œæ–°ä¸€ä»£å¤ªé˜³èƒ½ç”µæ± æ¿çš„æ•ˆçŽ‡æ¯”äº”å¹´å‰çš„åž‹å·é«˜å‡º30%ã€‚è¿™äº›è¿›æ­¥ä½¿å¤ªé˜³èƒ½æˆä¸ºè§£å†³å…¨çƒèƒ½æºå±æœºçš„ä¸»è¦ç«žäº‰è€…ã€‚æˆ‘ä»¬çš„æ•°æ®ç»è¿‡åŒè¡Œè¯„å®¡å¹¶å‘è¡¨åœ¨ã€Šè‡ªç„¶ã€‹æ‚å¿—ä¸Šï¼Œå±•ç¤ºäº†ä¸€æ¡æ¸…æ™°çš„å‰è¿›é“è·¯ã€‚", tr: "Son araÅŸtÄ±rmamÄ±z, yeni nesil gÃ¼neÅŸ panellerinin sadece beÅŸ yÄ±l Ã¶nceki modellere gÃ¶re %30 daha verimli olduÄŸunu doÄŸrulamaktadÄ±r. Bu geliÅŸmeler, gÃ¼neÅŸ enerjisini kÃ¼resel enerji krizini Ã§Ã¶zmede lider bir aday haline getirmektedir. Hakemli ve Nature'da yayÄ±nlanan verilerimiz, ileriye dÃ¶nÃ¼k net bir yol gÃ¶stermektedir." },
                evaluations: {
                    C: { // Currency
                        options: {
                            en: ["Very recent and up-to-date", "A few years old", "Very outdated"],
                            zh: ["éžå¸¸è¿‘æœŸå’Œæœ€æ–°", "å‡ å¹´å‰çš„", "éžå¸¸è¿‡æ—¶"],
                            tr: ["Ã‡ok yeni ve gÃ¼ncel", "BirkaÃ§ yÄ±llÄ±k", "Ã‡ok eski"],
                        },
                        correctAnswer: 0,
                        feedback: {
                            en: "Published last month, this information is very current.",
                            zh: "ä¸Šä¸ªæœˆå‘è¡¨ï¼Œæ­¤ä¿¡æ¯éžå¸¸åŠæ—¶ã€‚",
                            tr: "GeÃ§en ay yayÄ±nlanan bu bilgi Ã§ok gÃ¼ncel."
                        }
                    },
                    R: { // Relevance
                        options: {
                            en: ["Highly relevant", "Somewhat relevant", "Not relevant"],
                            zh: ["é«˜åº¦ç›¸å…³", "æœ‰äº›ç›¸å…³", "ä¸ç›¸å…³"],
                            tr: ["Ã‡ok alakalÄ±", "Biraz alakalÄ±", "AlakalÄ± deÄŸil"],
                        },
                        correctAnswer: 0,
                        feedback: {
                            en: "This directly discusses a solution for the energy crisis, a key part of climate change.",
                            zh: "è¿™ç›´æŽ¥è®¨è®ºäº†èƒ½æºå±æœºçš„è§£å†³æ–¹æ¡ˆï¼Œè¿™æ˜¯æ°”å€™å˜åŒ–çš„å…³é”®éƒ¨åˆ†ã€‚",
                            tr: "Bu, iklim deÄŸiÅŸikliÄŸinin Ã¶nemli bir parÃ§asÄ± olan enerji krizine bir Ã§Ã¶zÃ¼mÃ¼ doÄŸrudan tartÄ±ÅŸÄ±yor."
                        }
                    },
                    A: { // Authority
                        options: {
                            en: ["A qualified expert from a major university", "A hobbyist blogger", "An anonymous account"],
                            zh: ["ä¸€æ‰€é‡ç‚¹å¤§å­¦çš„åˆæ ¼ä¸“å®¶", "ä¸€ä¸ªä¸šä½™åšå®¢ä½œè€…", "ä¸€ä¸ªåŒ¿åè´¦æˆ·"],
                            tr: ["BÃ¼yÃ¼k bir Ã¼niversiteden nitelikli bir uzman", "Hobici bir blog yazarÄ±", "Anonim bir hesap"],
                        },
                        correctAnswer: 0,
                        feedback: {
                            en: "A PhD from Stanford University is a highly credible and authoritative source.",
                            zh: "æ–¯å¦ç¦å¤§å­¦çš„åšå£«æ˜¯ä¸€ä¸ªéžå¸¸å¯ä¿¡å’Œæƒå¨çš„æ¥æºã€‚",
                            tr: "Stanford Ãœniversitesi'nden bir doktora, son derece gÃ¼venilir ve yetkili bir kaynaktÄ±r."
                        }
                    },
                    P1: { // Accuracy
                        options: {
                            en: ["Very accurate, mentions peer-reviewed data", "Somewhat accurate, but mostly opinion", "Likely inaccurate, no evidence"],
                            zh: ["éžå¸¸å‡†ç¡®ï¼Œæåˆ°äº†åŒè¡Œè¯„å®¡çš„æ•°æ®", "æœ‰äº›å‡†ç¡®ï¼Œä½†ä¸»è¦æ˜¯è§‚ç‚¹", "å¯èƒ½ä¸å‡†ç¡®ï¼Œæ²¡æœ‰è¯æ®"],
                            tr: ["Ã‡ok doÄŸru, hakemli verilerden bahsediyor", "Biraz doÄŸru, ama Ã§oÄŸunlukla gÃ¶rÃ¼ÅŸ", "Muhtemelen yanlÄ±ÅŸ, kanÄ±t yok"],
                        },
                        correctAnswer: 0,
                        feedback: {
                            en: "The mention of 'peer-reviewed' and 'published in Nature' suggests high accuracy.",
                            zh: "æåˆ°â€œåŒè¡Œè¯„å®¡â€å’Œâ€œå‘è¡¨åœ¨ã€Šè‡ªç„¶ã€‹æ‚å¿—ä¸Šâ€è¡¨æ˜Žå‡†ç¡®æ€§å¾ˆé«˜ã€‚",
                            tr: "'Hakemli' ve 'Nature'da yayÄ±nlandÄ±' ifadeleri yÃ¼ksek doÄŸruluÄŸa iÅŸaret ediyor."
                        }
                    },
                    P2: { // Purpose
                        options: {
                            en: ["To inform the public based on research", "To sell a product", "To entertain with a fictional story"],
                            zh: ["æ ¹æ®ç ”ç©¶å‘å…¬ä¼—æä¾›ä¿¡æ¯", "é”€å”®äº§å“", "ç”¨è™šæž„æ•…äº‹å¨±ä¹"],
                            tr: ["AraÅŸtÄ±rmaya dayanarak halkÄ± bilgilendirmek", "Bir Ã¼rÃ¼n satmak", "Kurgusal bir hikaye ile eÄŸlendirmek"],
                        },
                        correctAnswer: 0,
                        feedback: {
                            en: "The goal is clearly to educate and inform readers about scientific advancements.",
                            zh: "ç›®æ ‡æ˜¾ç„¶æ˜¯æ•™è‚²å’Œå‘ŠçŸ¥è¯»è€…ç§‘å­¦è¿›æ­¥ã€‚",
                            tr: "AmaÃ§, okuyucularÄ± bilimsel geliÅŸmeler hakkÄ±nda eÄŸitmek ve bilgilendirmektir."
                        }
                    }
                }
            },
            {
                id: 2,
                title: { en: "PlanetSavers Blog: Why Wind Turbines Are a SCAM!", zh: "åœ°çƒæ‹¯æ•‘è€…åšå®¢ï¼šä¸ºä»€ä¹ˆé£ŽåŠ›æ¶¡è½®æœºæ˜¯ä¸ªéª—å±€ï¼", tr: "Gezegen KurtarÄ±cÄ±larÄ± Blogu: RÃ¼zgar TÃ¼rbinleri Neden Bir Aldatmaca!" },
                author: { en: "By ConcernedCitizen88. Published: 3 years ago", zh: "ä½œè€…ï¼šConcernedCitizen88ã€‚å‘è¡¨æ—¶é—´ï¼š3å¹´å‰", tr: "Yazan: EndiÅŸeliVatandaÅŸ88. YayÄ±nlanma: 3 yÄ±l Ã¶nce" },
                content: { en: "Don't believe the hype! They tell you wind turbines are 'green,' but I saw one that had fallen over once. These things are dangerous and probably don't even work. My uncle says he heard they use more energy to build than they ever produce. We need to stop this madness before it's too late.", zh: "åˆ«ç›¸ä¿¡é‚£äº›ç‚’ä½œï¼ä»–ä»¬å‘Šè¯‰ä½ é£ŽåŠ›æ¶¡è½®æœºæ˜¯â€˜ç»¿è‰²â€™çš„ï¼Œä½†æˆ‘æ›¾ç»çœ‹åˆ°ä¸€ä¸ªå€’äº†ã€‚è¿™äº›ä¸œè¥¿å¾ˆå±é™©ï¼Œè€Œä¸”å¯èƒ½æ ¹æœ¬ä¸èµ·ä½œç”¨ã€‚æˆ‘å”å”è¯´ä»–å¬è¯´å»ºé€ å®ƒä»¬æ‰€ç”¨çš„èƒ½æºæ¯”å®ƒä»¬äº§ç”Ÿçš„è¿˜è¦å¤šã€‚æˆ‘ä»¬å¿…é¡»åœ¨ä¸ºæ—¶å·²æ™šä¹‹å‰é˜»æ­¢è¿™ç§ç–¯ç‹‚ã€‚", tr: "Bu aldatmacaya inanmayÄ±n! Size rÃ¼zgar tÃ¼rbinlerinin 'yeÅŸil' olduÄŸunu sÃ¶ylÃ¼yorlar, ama ben bir keresinde devrilmiÅŸ bir tane gÃ¶rdÃ¼m. Bu ÅŸeyler tehlikeli ve muhtemelen Ã§alÄ±ÅŸmÄ±yor bile. Amcam, inÅŸa edilmelerinin Ã¼rettiklerinden daha fazla enerji harcadÄ±ÄŸÄ±nÄ± duyduÄŸunu sÃ¶yledi. Ã‡ok geÃ§ olmadan bu Ã§Ä±lgÄ±nlÄ±ÄŸÄ± durdurmalÄ±yÄ±z." },
                evaluations: {
                    C: {
                        options: {
                            en: ["Very recent and up-to-date", "A few years old", "Very outdated"],
                            zh: ["éžå¸¸è¿‘æœŸå’Œæœ€æ–°", "å‡ å¹´å‰çš„", "éžå¸¸è¿‡æ—¶"],
                            tr: ["Ã‡ok yeni ve gÃ¼ncel", "BirkaÃ§ yÄ±llÄ±k", "Ã‡ok eski"],
                        },
                        correctAnswer: 1,
                        feedback: {
                            en: "At three years old, the information might not reflect the latest technology or research.",
                            zh: "ä¸‰å¹´å‰çš„ä¿¡æ¯å¯èƒ½æ— æ³•åæ˜ æœ€æ–°çš„æŠ€æœ¯æˆ–ç ”ç©¶ã€‚",
                            tr: "ÃœÃ§ yÄ±llÄ±k olduÄŸu iÃ§in, bilgi en son teknolojiyi veya araÅŸtÄ±rmayÄ± yansÄ±tmayabilir."
                        }
                    },
                    R: {
                        options: {
                            en: ["Highly relevant", "Somewhat relevant", "Not relevant"],
                            zh: ["é«˜åº¦ç›¸å…³", "æœ‰äº›ç›¸å…³", "ä¸ç›¸å…³"],
                            tr: ["Ã‡ok alakalÄ±", "Biraz alakalÄ±", "AlakalÄ± deÄŸil"],
                        },
                        correctAnswer: 0,
                        feedback: {
                            en: "It discusses wind turbines, which is relevant to climate change solutions, even if the information is poor.",
                            zh: "å®ƒè®¨è®ºäº†é£ŽåŠ›æ¶¡è½®æœºï¼Œè¿™ä¸Žæ°”å€™å˜åŒ–è§£å†³æ–¹æ¡ˆæœ‰å…³ï¼Œå³ä½¿ä¿¡æ¯è´¨é‡å¾ˆå·®ã€‚",
                            tr: "Bilgiler zayÄ±f olsa da, iklim deÄŸiÅŸikliÄŸi Ã§Ã¶zÃ¼mleriyle ilgili olan rÃ¼zgar tÃ¼rbinlerini tartÄ±ÅŸÄ±yor."
                        }
                    },
                    A: {
                        options: {
                            en: ["A qualified expert from a major university", "A hobbyist blogger", "An anonymous account"],
                            zh: ["ä¸€æ‰€é‡ç‚¹å¤§å­¦çš„åˆæ ¼ä¸“å®¶", "ä¸€ä¸ªä¸šä½™åšå®¢ä½œè€…", "ä¸€ä¸ªåŒ¿åè´¦æˆ·"],
                            tr: ["BÃ¼yÃ¼k bir Ã¼niversiteden nitelikli bir uzman", "Hobici bir blog yazarÄ±", "Anonim bir hesap"],
                        },
                        correctAnswer: 2,
                        feedback: {
                            en: "The author is anonymous ('ConcernedCitizen88') and has no stated qualifications.",
                            zh: "ä½œè€…æ˜¯åŒ¿åçš„ï¼ˆâ€˜ConcernedCitizen88â€™ï¼‰ï¼Œæ²¡æœ‰è¯´æ˜Žä»»ä½•èµ„è´¨ã€‚",
                            tr: "Yazar anonimdir ('EndiÅŸeliVatandaÅŸ88') ve belirtilen bir niteliÄŸi yoktur."
                        }
                    },
                    P1: {
                        options: {
                            en: ["Very accurate, mentions peer-reviewed data", "Somewhat accurate, but mostly opinion", "Likely inaccurate, no evidence"],
                            zh: ["éžå¸¸å‡†ç¡®ï¼Œæåˆ°äº†åŒè¡Œè¯„å®¡çš„æ•°æ®", "æœ‰äº›å‡†ç¡®ï¼Œä½†ä¸»è¦æ˜¯è§‚ç‚¹", "å¯èƒ½ä¸å‡†ç¡®ï¼Œæ²¡æœ‰è¯æ®"],
                            tr: ["Ã‡ok doÄŸru, hakemli verilerden bahsediyor", "Biraz doÄŸru, ama Ã§oÄŸunlukla gÃ¶rÃ¼ÅŸ", "Muhtemelen yanlÄ±ÅŸ, kanÄ±t yok"],
                        },
                        correctAnswer: 2,
                        feedback: {
                            en: "The 'evidence' is just personal observation and hearsay ('my uncle says'). This is not reliable.",
                            zh: "â€œè¯æ®â€åªæ˜¯ä¸ªäººè§‚å¯Ÿå’Œé“å¬é€”è¯´ï¼ˆâ€œæˆ‘å”å”è¯´â€ï¼‰ã€‚è¿™æ˜¯ä¸å¯é çš„ã€‚",
                            tr: "'KanÄ±t' sadece kiÅŸisel gÃ¶zlem ve sÃ¶ylentiden ibaret ('amcam sÃ¶ylÃ¼yor'). Bu gÃ¼venilir deÄŸil."
                        }
                    },
                    P2: {
                        options: {
                            en: ["To inform with facts", "To persuade with emotion and opinion", "To sell a product"],
                            zh: ["ç”¨äº‹å®žå‘ŠçŸ¥", "ç”¨æƒ…æ„Ÿå’Œè§‚ç‚¹è¯´æœ", "é”€å”®äº§å“"],
                            tr: ["GerÃ§eklerle bilgilendirmek", "Duygu ve gÃ¶rÃ¼ÅŸle ikna etmek", "Bir Ã¼rÃ¼n satmak"],
                        },
                        correctAnswer: 1,
                        feedback: {
                            en: "The language is emotional ('SCAM!', 'madness') and aims to persuade the reader, not inform them objectively.",
                            zh: "è¯­è¨€æ˜¯æƒ…ç»ªåŒ–çš„ï¼ˆâ€˜éª—å±€ï¼â€™ï¼Œâ€˜ç–¯ç‹‚â€™ï¼‰ï¼Œæ—¨åœ¨è¯´æœè¯»è€…ï¼Œè€Œä¸æ˜¯å®¢è§‚åœ°å‘ŠçŸ¥ä»–ä»¬ã€‚",
                            tr: "Dil duygusaldÄ±r ('ALDATMACA!', 'Ã§Ä±lgÄ±nlÄ±k') ve okuyucuyu objektif olarak bilgilendirmek yerine ikna etmeyi amaÃ§lamaktadÄ±r."
                        }
                    }
                }
            },
            {
                id: 3,
                title: { en: "Buy 'Sun-Be-Gone' Umbrellas Now!", zh: "ç«‹å³è´­ä¹°'Sun-Be-Gone'é®é˜³ä¼žï¼", tr: "'Sun-Be-Gone' Åžemsiyelerini Åžimdi SatÄ±n AlÄ±n!" },
                author: { en: "From the Marketing Dept. at UmbrellaCorp. Published: This Week", zh: "æ¥è‡ªUmbrellaCorpå¸‚åœºéƒ¨ã€‚å‘è¡¨æ—¶é—´ï¼šæœ¬å‘¨", tr: "UmbrellaCorp Pazarlama DepartmanÄ±ndan. YayÄ±nlanma: Bu Hafta" },
                content: { en: "Feeling the heat? Scientists agree the world is getting warmer. Our patented 'Sun-Be-Gone' umbrella blocks 100% of harmful UV rays and is the ONLY real solution to protect your family. A recent study (funded by us) found that 10 out of 10 users felt cooler and happier. Don't wait for a climate disaster, buy your personal climate solution today!", zh: "æ„Ÿè§‰çƒ­å—ï¼Ÿç§‘å­¦å®¶ä»¬ä¸€è‡´è®¤ä¸ºä¸–ç•Œæ­£åœ¨å˜æš–ã€‚æˆ‘ä»¬èŽ·å¾—ä¸“åˆ©çš„â€œSun-Be-Goneâ€é®é˜³ä¼žå¯é˜»æŒ¡100%çš„æœ‰å®³ç´«å¤–çº¿ï¼Œæ˜¯ä¿æŠ¤æ‚¨å®¶äººçš„å”¯ä¸€çœŸæ­£è§£å†³æ–¹æ¡ˆã€‚æœ€è¿‘ä¸€é¡¹ï¼ˆç”±æˆ‘ä»¬èµ„åŠ©çš„ï¼‰ç ”ç©¶å‘çŽ°ï¼Œ10åç”¨æˆ·ä¸­æœ‰10åæ„Ÿè§‰æ›´å‡‰çˆ½ã€æ›´å¿«ä¹ã€‚ä¸è¦ç­‰å¾…æ°”å€™ç¾éš¾ï¼Œç«‹å³è´­ä¹°æ‚¨çš„ä¸ªäººæ°”å€™è§£å†³æ–¹æ¡ˆï¼", tr: "SÄ±caÄŸÄ± mÄ± hissediyorsunuz? Bilim insanlarÄ± dÃ¼nyanÄ±n Ä±sÄ±ndÄ±ÄŸÄ± konusunda hemfikir. Patentli 'Sun-Be-Gone' ÅŸemsiyemiz zararlÄ± UV Ä±ÅŸÄ±nlarÄ±nÄ±n %100'Ã¼nÃ¼ engeller ve ailenizi korumak iÃ§in TEK gerÃ§ek Ã§Ã¶zÃ¼mdÃ¼r. YakÄ±n zamanda (bizim tarafÄ±mÄ±zdan finanse edilen) bir Ã§alÄ±ÅŸma, 10 kullanÄ±cÄ±dan 10'unun daha serin ve daha mutlu hissettiÄŸini buldu. Ä°klim felaketini beklemeyin, kiÅŸisel iklim Ã§Ã¶zÃ¼mÃ¼nÃ¼zÃ¼ bugÃ¼n satÄ±n alÄ±n!" },
                evaluations: {
                     C: { 
                        options: {
                            en: ["Very recent and up-to-date", "A few years old", "Very outdated"],
                            zh: ["éžå¸¸è¿‘æœŸå’Œæœ€æ–°", "å‡ å¹´å‰çš„", "éžå¸¸è¿‡æ—¶"],
                            tr: ["Ã‡ok yeni ve gÃ¼ncel", "BirkaÃ§ yÄ±llÄ±k", "Ã‡ok eski"],
                        },
                        correctAnswer: 0,
                        feedback: {
                            en: "Published this week, it's very current.",
                            zh: "æœ¬å‘¨å‘è¡¨ï¼Œéžå¸¸åŠæ—¶ã€‚",
                            tr: "Bu hafta yayÄ±nlanan, Ã§ok gÃ¼ncel."
                        }
                    },
                    R: { 
                        options: {
                            en: ["Highly relevant, it's a climate solution", "Somewhat relevant, it mentions climate change", "Not relevant, it's just about umbrellas"],
                            zh: ["é«˜åº¦ç›¸å…³ï¼Œè¿™æ˜¯ä¸€ä¸ªæ°”å€™è§£å†³æ–¹æ¡ˆ", "æœ‰äº›ç›¸å…³ï¼Œå®ƒæåˆ°äº†æ°”å€™å˜åŒ–", "ä¸ç›¸å…³ï¼Œè¿™åªæ˜¯å…³äºŽé›¨ä¼žçš„"],
                            tr: ["Ã‡ok alakalÄ±, bir iklim Ã§Ã¶zÃ¼mÃ¼", "Biraz alakalÄ±, iklim deÄŸiÅŸikliÄŸinden bahsediyor", "AlakalÄ± deÄŸil, sadece ÅŸemsiyelerle ilgili"],
                        },
                        correctAnswer: 1,
                        feedback: {
                            en: "It's not a real solution to the overall problem, but it mentions the topic. It's only slightly relevant.",
                            zh: "è¿™ä¸æ˜¯è§£å†³æ•´ä¸ªé—®é¢˜çš„çœŸæ­£åŠžæ³•ï¼Œä½†å®ƒæåˆ°äº†è¿™ä¸ªè¯é¢˜ã€‚å®ƒåªæ˜¯ç¨å¾®ç›¸å…³ã€‚",
                            tr: "Genel soruna gerÃ§ek bir Ã§Ã¶zÃ¼m deÄŸil, ama konudan bahsediyor. Sadece biraz alakalÄ±."
                        }
                    },
                    A: {
                        options: {
                            en: ["An unbiased scientific organization", "A company selling a product", "A government environmental agency"],
                            zh: ["ä¸€ä¸ªå…¬æ­£çš„ç§‘å­¦ç»„ç»‡", "ä¸€å®¶é”€å”®äº§å“çš„å…¬å¸", "ä¸€ä¸ªæ”¿åºœçŽ¯ä¿æœºæž„"],
                            tr: ["TarafsÄ±z bir bilimsel kuruluÅŸ", "Bir Ã¼rÃ¼n satan bir ÅŸirket", "Bir devlet Ã§evre ajansÄ±"],
                        },
                        correctAnswer: 1,
                        feedback: {
                            en: "The author is the marketing department of the company trying to sell you something. They are biased.",
                            zh: "ä½œè€…æ˜¯è¯•å›¾å‘æ‚¨æŽ¨é”€ä¸œè¥¿çš„å…¬å¸çš„è¥é”€éƒ¨é—¨ã€‚ä»–ä»¬æ˜¯æœ‰åè§çš„ã€‚",
                            tr: "Yazar, size bir ÅŸeyler satmaya Ã§alÄ±ÅŸan ÅŸirketin pazarlama departmanÄ±dÄ±r. TaraflÄ±dÄ±rlar."
                        }
                    },
                    P1: {
                        options: {
                            en: ["Highly reliable, uses independent studies", "Potentially biased, the study was funded by the company", "Completely made up, no data given"],
                            zh: ["é«˜åº¦å¯é ï¼Œä½¿ç”¨ç‹¬ç«‹ç ”ç©¶", "å¯èƒ½å­˜åœ¨åè§ï¼Œè¯¥ç ”ç©¶ç”±å…¬å¸èµ„åŠ©", "å®Œå…¨æ˜¯ç¼–é€ çš„ï¼Œæ²¡æœ‰ç»™å‡ºæ•°æ®"],
                            tr: ["Son derece gÃ¼venilir, baÄŸÄ±msÄ±z Ã§alÄ±ÅŸmalar kullanÄ±yor", "Potansiyel olarak taraflÄ±, Ã§alÄ±ÅŸma ÅŸirket tarafÄ±ndan finanse edildi", "Tamamen uydurma, veri verilmemiÅŸ"],
                        },
                        correctAnswer: 1,
                        feedback: {
                            en: "A study funded by the company selling the product is not reliable evidence. It's biased.",
                            zh: "ç”±é”€å”®äº§å“çš„å…¬å¸èµ„åŠ©çš„ç ”ç©¶ä¸æ˜¯å¯é çš„è¯æ®ã€‚å®ƒæ˜¯æœ‰åè§çš„ã€‚",
                            tr: "ÃœrÃ¼nÃ¼ satan ÅŸirket tarafÄ±ndan finanse edilen bir Ã§alÄ±ÅŸma gÃ¼venilir bir kanÄ±t deÄŸildir. TaraflÄ±dÄ±r."
                        }
                    },
                    P2: {
                        options: {
                            en: ["To inform", "To entertain", "To persuade you to buy something"],
                            zh: ["å‘ŠçŸ¥", "å¨±ä¹", "è¯´æœä½ ä¹°ä¸œè¥¿"],
                            tr: ["Bilgilendirmek", "EÄŸlendirmek", "Sizi bir ÅŸey satÄ±n almaya ikna etmek"],
                        },
                        correctAnswer: 2,
                        feedback: {
                            en: "The entire purpose of this piece is to sell you an umbrella by using climate change as a hook.",
                            zh: "è¿™ç¯‡æ–‡ç« çš„å…¨éƒ¨ç›®çš„å°±æ˜¯ä»¥æ°”å€™å˜åŒ–ä¸ºç”±å¤´å‘ä½ æŽ¨é”€ä¸€æŠŠé›¨ä¼žã€‚",
                            tr: "Bu yazÄ±nÄ±n bÃ¼tÃ¼n amacÄ±, iklim deÄŸiÅŸikliÄŸini bir kanca olarak kullanarak size bir ÅŸemsiye satmaktÄ±r."
                        }
                    }
                }
            }
        ];

        // --- GAME STATE ---
        let currentSourceIndex = 0;
        let score = 0;
        let currentLang = 'en';

        // --- DOM ELEMENTS ---
        const scoreEl = document.getElementById('score');
        const sourceTitleEl = document.getElementById('source-title');
        const sourceAuthorEl = document.getElementById('source-author');
        const sourceContentEl = document.getElementById('source-content');
        const questionsContainer = document.getElementById('questions-container');
        const submitBtn = document.getElementById('submit-btn');
        const nextBtn = document.getElementById('next-btn');
        const gameArea = document.getElementById('game-area');
        const finalScreen = document.getElementById('final-screen');
        const finalScoreEl = document.getElementById('final-score');
        const finalFeedbackEl = document.getElementById('final-feedback');

        // --- FUNCTIONS ---

        function setLanguage(lang) {
            currentLang = lang;
            document.querySelectorAll('[data-key]').forEach(el => {
                const key = el.getAttribute('data-key');
                // The previous logic incorrectly split keys with underscores (like 'score_label').
                // This now directly accesses the key from the translations object.
                const text = translations[lang][key];
                if (text) {
                    el.innerText = text;
                } else {
                    el.innerText = `[${key}]`;
                }
            });
            
            document.querySelectorAll('.language-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById(`lang-${lang}`).classList.add('active');

            // Reload current source to update question text
            loadSource(currentSourceIndex);
        }

        function loadSource(index) {
            if (index >= gameData.length) {
                showFinalScreen();
                return;
            }

            const source = gameData[index];
            sourceTitleEl.innerText = source.title[currentLang];
            sourceAuthorEl.innerText = source.author[currentLang];
            sourceContentEl.innerText = source.content[currentLang];

            questionsContainer.innerHTML = ''; // Clear previous questions

            const craapOrder = ['C', 'R', 'A', 'P1', 'P2'];
            craapOrder.forEach(key => {
                const evalData = source.evaluations[key];
                const questionDiv = document.createElement('div');
                questionDiv.className = 'mb-6';
                questionDiv.innerHTML = `
                    <h4 class="text-lg font-semibold mb-2">${translations[currentLang].craap[key]}: <span class="font-normal text-gray-600">${translations[currentLang].questions[key]}</span></h4>
                    <div class="space-y-2" id="options-${key}">
                        ${evalData.options[currentLang].map((option, i) => `
                            <label class="flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-100 transition-colors">
                                <input type="radio" name="q-${key}" value="${i}" class="mr-3 h-5 w-5 text-blue-500 focus:ring-blue-400">
                                <span>${option}</span>
                            </label>
                        `).join('')}
                    </div>
                    <div id="feedback-${key}" class="hidden mt-2 p-3 rounded-md text-sm"></div>
                `;
                questionsContainer.appendChild(questionDiv);
            });
            
            submitBtn.classList.remove('hidden');
            nextBtn.classList.add('hidden');
            submitBtn.disabled = false;
        }
        
        function allQuestionsAnswered() {
            const craapOrder = ['C', 'R', 'A', 'P1', 'P2'];
            return craapOrder.every(key => {
                return document.querySelector(`input[name="q-${key}"]:checked`);
            });
        }

        function checkAnswers() {
            if (!allQuestionsAnswered()) {
                alert(currentLang === 'zh' ? 'è¯·å›žç­”æ‰€æœ‰é—®é¢˜ï¼' : currentLang === 'tr' ? 'LÃ¼tfen tÃ¼m sorularÄ± cevaplayÄ±n!' : 'Please answer all questions!');
                return;
            }

            const source = gameData[currentSourceIndex];
            let roundScore = 0;

            const craapOrder = ['C', 'R', 'A', 'P1', 'P2'];
            craapOrder.forEach(key => {
                const selected = document.querySelector(`input[name="q-${key}"]:checked`);
                const userAnswer = parseInt(selected.value, 10);
                const correctAnswer = source.evaluations[key].correctAnswer;
                const feedbackEl = document.getElementById(`feedback-${key}`);

                // Disable radios for this question
                document.querySelectorAll(`input[name="q-${key}"]`).forEach(radio => radio.disabled = true);
                
                feedbackEl.innerHTML = `<strong>${userAnswer === correctAnswer ? translations[currentLang].feedback_correct : translations[currentLang].feedback_incorrect}</strong> ${source.evaluations[key].feedback[currentLang]}`;
                feedbackEl.classList.remove('hidden');

                if (userAnswer === correctAnswer) {
                    roundScore += 10;
                    selected.parentElement.classList.add('bg-green-100', 'border-green-400');
                    feedbackEl.classList.add('feedback-correct', 'bg-green-50');
                } else {
                    selected.parentElement.classList.add('bg-red-100', 'border-red-400');
                    feedbackEl.classList.add('feedback-incorrect', 'bg-red-50');
                    // Also highlight the correct answer
                    const correctLabel = document.querySelector(`input[name="q-${key}"][value="${correctAnswer}"]`).parentElement;
                    correctLabel.classList.add('bg-green-100', 'border-green-400');
                }
            });

            score += roundScore;
            scoreEl.innerText = score;

            submitBtn.classList.add('hidden');
            nextBtn.classList.remove('hidden');
        }

        function nextSource() {
            currentSourceIndex++;
            loadSource(currentSourceIndex);
        }
        
        function showFinalScreen() {
            gameArea.classList.add('hidden');
            finalScreen.classList.remove('hidden');
            finalScoreEl.innerText = score;
            
            const maxScore = gameData.length * 50;
            const percentage = (score / maxScore) * 100;

            let feedbackKey;
            if (percentage >= 90) {
                feedbackKey = 'final_feedback_excellent';
            } else if (percentage >= 70) {
                feedbackKey = 'final_feedback_good';
            } else if (percentage >= 50) {
                feedbackKey = 'final_feedback_average';
            } else {
                feedbackKey = 'final_feedback_needs_improvement';
            }
            finalFeedbackEl.innerText = translations[currentLang][feedbackKey];
        }
        
        function restartGame() {
            currentSourceIndex = 0;
            score = 0;
            scoreEl.innerText = '0';
            
            finalScreen.classList.add('hidden');
            gameArea.classList.remove('hidden');
            
            loadSource(currentSourceIndex);
        }

        // --- INITIALIZE GAME ---
        window.onload = () => {
            loadSource(currentSourceIndex);
            setLanguage('en');
        };
    </script>
</body>
</html>


