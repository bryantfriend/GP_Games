<!DOCTYPE html>
<html lang="en" class="h-full bg-gray-50">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chart Analysis Activity</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                },
            },
        };
    </script>
    <style>
        /* Simple loading spinner */
        .loader {
            border: 4px solid #f3f3f3; /* Light grey */
            border-top: 4px solid #3498db; /* Blue */
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            position: absolute;
            top: 50%;
            left: 50%;
            margin-top: -20px;
            margin-left: -20px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Lesson Modal Styles */
        #lesson-modal {
            transition: opacity 0.3s ease-in-out;
        }
        .lesson-slide {
            display: none;
            animation: fadeIn 0.5s;
        }
        .lesson-slide.active {
            display: block;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Option Button Styles */
        .option-btn {
            display: block;
            width: 100%;
            text-align: left;
            padding: 12px;
            border: 1px solid #d1d5db; /* gray-300 */
            border-radius: 8px;
            background-color: #ffffff; /* white */
            color: #111827; /* gray-900 */
            font-medium;
            transition: all 0.2s ease;
            cursor: pointer;
        }
        .option-btn:hover {
            background-color: #f9fafb; /* gray-50 */
            border-color: #6b7280; /* gray-500 */
        }
        .option-btn.selected {
            background-color: #3b82f6; /* blue-600 */
            color: #ffffff;
            border-color: #3b82f6;
        }
        .option-btn.disabled {
            opacity: 0.6;
            cursor: not-allowed;
            background-color: #f3f4f6; /* gray-100 */
        }

        /* Correct/Incorrect Styling */
        .option-btn.correct {
            background-color: #10b981; /* green-500 */
            color: #ffffff;
            border-color: #10b981;
        }
        .option-btn.incorrect {
            background-color: #ef4444; /* red-500 */
            color: #ffffff;
            border-color: #ef4444;
        }
    </style>
</head>
<body class="h-full font-sans antialiased">
    <!-- Main Content -->
    <div class="flex flex-col lg:flex-row w-full max-w-7xl mx-auto p-4 lg:p-8 min-h-screen">

        <!-- Left Side: Chart Display -->
        <div class="w-full lg:w-3/5 lg:pr-8 flex flex-col">
            <header class="mb-6 flex justify-between items-center">
                <div>
                    <h1 class="text-3xl font-bold text-gray-900" data-translate="mainTitle">Chart Analysis Activity</h1>
                    <p class="text-lg text-gray-600 mt-1" data-translate="mainSubtitle">Select the best options based on the visual.</p>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="relative">
                        <select id="language-selector" class="appearance-none block w-full bg-white border border-gray-300 text-gray-700 py-2 px-4 pr-8 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            <option value="en">English</option>
                            <option value="ru">Русский</option>
                            <option value="tr">Türkçe</option>
                            <option value="zh">中文</option>
                        </select>
                        <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
                            <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/></svg>
                        </div>
                    </div>
                    <button id="open-lesson-btn" class="p-3 bg-white rounded-full shadow-md border border-gray-200 text-blue-600 hover:bg-gray-50" data-translate-title="lessonButtonTitle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.79 4 4 0 1.98-1.79 4-4 4-1.742 0-3.223-.835-3.772-2M12 18v.01M12 6v.01" />
                        </svg>
                    </button>
                </div>
            </header>
            
            <div class="bg-white p-6 rounded-xl shadow-lg border border-gray-200 flex-grow">
                <h2 id="chart-title" class="text-xl font-semibold text-center mb-4 text-gray-800">Chart 1 of 20</h2>
                <div id="chart-container" class="relative w-full h-64 md:h-96 lg:h-[500px]">
                    <!-- Loading spinner -->
                    <div id="loader" class="loader"></div>
                    <!-- Canvas for the chart -->
                    <canvas id="myChart"></canvas>
                </div>
            </div>
            
            <!-- Controls -->
            <div class="mt-6 flex flex-col sm:flex-row gap-4">
                <button id="submit-btn" class="flex-1 bg-blue-600 text-white font-medium py-3 px-5 rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all" data-translate="checkButton">
                    Check Analysis
                </button>
                <button id="next-btn" class="flex-1 bg-green-600 text-white font-medium py-3 px-5 rounded-lg shadow-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-all" data-translate="nextButton">
                    Next Chart
                </button>
            </div>
            <div id="answer-box" class="mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg text-blue-800 text-center font-bold text-lg hidden">
                <!-- Score appears here -->
            </div>
        </div>

        <!-- Right Side: Input Form -->
        <div class="w-full lg:w-2/5 lg:pl-8 mt-8 lg:mt-0">
            <aside class="bg-white p-6 rounded-xl shadow-lg border border-gray-200 sticky top-8">
                <h3 class="text-2xl font-semibold text-gray-900 mb-5" data-translate="analysisTitle">Your Group's Analysis</h3>
                <div class="space-y-6">
                    <!-- Part 1 -->
                    <div>
                        <label class="block text-md font-semibold text-gray-700 mb-2" data-translate="part1Label">1. Identify the type of visual:</label>
                        <div id="part1-options" class="grid grid-cols-2 gap-3">
                            <!-- Options injected by JS -->
                        </div>
                    </div>
                    
                    <!-- Part 2 -->
                    <div>
                        <label id="part2-label" class="block text-md font-semibold text-gray-700 mb-2">2. Write 3 observations: (Selected: <span id="obs-count">0</span>/3)</label>
                        <div id="part2-options" class="space-y-2">
                            <!-- Options injected by JS -->
                        </div>
                    </div>
                    
                    <!-- Part 3 -->
                    <div>
                        <label class="block text-md font-semibold text-gray-700 mb-2" data-translate="part3Label">3. Write 1 conclusion:</label>
                        <div id="part3-options" class="space-y-2">
                            <!-- Options injected by JS -->
                        </div>
                    </div>
                </div>
            </aside>
        </div>
    </div>

    <!-- Lesson Modal -->
    <div id="lesson-modal" class="fixed inset-0 z-50 bg-black bg-opacity-75 flex items-center justify-center p-4 hidden opacity-0" aria-labelledby="modal-title" role="dialog" aria-modal="true">
        <div id="lesson-content" class="bg-white w-full max-w-3xl h-[90vh] rounded-2xl shadow-xl flex flex-col overflow-hidden transform transition-all scale-95 opacity-0">
            <!-- Modal Header -->
            <div class="flex justify-between items-center p-5 border-b">
                <h2 class="text-2xl font-bold text-gray-900" id="modal-title" data-translate="lessonTitle">Chart Analysis Lesson</h2>
                <button id="exit-lesson-btn" class="text-gray-400 hover:text-gray-600">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            
            <!-- Modal Body (Slides) -->
            <div class="flex-grow p-6 md:p-8 overflow-y-auto">
                <div id="lesson-slides-container">
                    <!-- Slides will be injected by JavaScript -->
                </div>
            </div>

            <!-- Modal Footer (Nav) -->
            <div class="flex justify-between items-center p-5 border-t bg-gray-50">
                <button id="lesson-prev-btn" class="bg-gray-200 text-gray-700 font-medium py-2 px-4 rounded-lg hover:bg-gray-300 disabled:opacity-50" data-translate="lessonPrev" disabled>
                    Previous
                </button>
                <span id="slide-indicator" class="text-sm text-gray-600">Slide 1 of 6</span>
                <button id="lesson-next-btn" class="bg-blue-600 text-white font-medium py-2 px-4 rounded-lg hover:bg-blue-700" data-translate="lessonNext">
                    Next
                </button>
            </div>
        </div>
    </div>


    <script>
        // --- Translations Object ---
        const translations = {
            // English
            en: {
                // Main UI
                mainTitle: "Chart Analysis Activity",
                mainSubtitle: "Select the best options based on the visual.",
                lessonButtonTitle: "Open Lesson",
                analysisTitle: "Your Group's Analysis",
                part1Label: "1. Identify the type of visual:",
                part2Label: "2. Write 3 observations: (Selected: {0}/3)",
                part3Label: "3. Write 1 conclusion:",
                checkButton: "Check Analysis",
                checkButtonComplete: "Analysis Complete",
                nextButton: "Next Chart",
                scorePrefix: "Your Score:",
                chart: "Chart",
                of: "of",
                // Lesson Modal
                lessonTitle: "Chart Analysis Lesson",
                lessonPrev: "Previous",
                lessonNext: "Next",
                slideIndicator: "Slide {0} of {1}",
                // Lesson Slides
                slide0_title: "Welcome! What is Data Visualization?",
                slide0_p1: "Data visualization is the practice of turning data (numbers and text) into a visual chart or graph.",
                slide0_p2: "Why do we do this? Because our brains are *much* better at understanding pictures than long lists of numbers! A good chart tells a story quickly and clearly.",
                slide0_taskTitle: "Your Task:",
                slide0_task1: "<strong>1. Identify the Visual:</strong> What kind of chart is it? (Bar, Line, Pie, etc.)",
                slide0_task2: "<strong>2. Make Observations:</strong> What do you *see*? State the facts. (e.g., \"Sales in March were $180k,\" \"Website traffic is going up.\")",
                slide0_task3: "<strong>3. Draw a Conclusion:</strong> What does it *mean*? This is the \"so what?\" or the main story. (e.g., \"March was our best sales month,\" \"Our website is becoming more popular.\")",
                slide1_title: "Chart Type: Bar Chart",
                slide1_p1: "Bar charts are perfect for comparing values across different categories.",
                slide1_read: "<strong>How to Read:</strong> Look at the *length* of each bar. The longer the bar, the larger the value.",
                slide1_obs: "<strong>Good Observation:</strong> \"Category B has the highest value (50).\" or \"Category C is the lowest (10).\"",
                slide1_conc: "<strong>Good Conclusion:</strong> \"Category B is the most popular choice.\"",
                slide1_chart_label: "Value",
                slide1_chart_catA: "Category A",
                slide1_chart_catB: "Category B",
                slide1_chart_catC: "Category C",
                slide2_title: "Chart Type: Line Chart",
                slide2_p1: "Line charts are the best way to show a *trend* over a period of time (like days, months, or years).",
                slide2_read: "<strong>How to Read:</strong> Follow the line from left to right. Is it going up, down, or staying flat?",
                slide2_obs: "<strong>Good Observation:</strong> \"The value increased from 10 in Jan to 45 in April.\" or \"There was a small dip in March.\"",
                slide2_conc: "<strong>Good Conclusion:</strong> \"The trend is positive, showing growth over the first quarter.\"",
                slide2_chart_label: "Trend",
                slide3_title: "Chart Type: Pie Chart",
                slide3_p1: "Pie charts are used to show *proportions* or percentages. They show how a whole \"pie\" is divided into parts.",
                slide3_read: "<strong>How to Read:</strong> Look at the *size* of each slice. The bigger the slice, the larger the percentage.",
                slide3_obs: "<strong>Good Observation:</strong> \"Red is the largest slice, taking up half (50%) of the total.\"",
                slide3_conc: "<strong>Good Conclusion:</strong> \"The 'Red' category makes up the majority of the budget.\"",
                slide3_chart_red: "Red",
                slide3_chart_blue: "Blue",
                slide3_chart_yellow: "Yellow",
                slide4_title: "Chart Type: Scatter Plot",
                slide4_p1: "Scatter plots show the *relationship* between two different number values. They help us see if one thing affects another.",
                slide4_read: "<strong>How to Read:</strong> Look at the overall pattern of dots. Do they go up from left to right? Down? Or are they just a random cloud?",
                slide4_obs: "<strong>Good Observation:</strong> \"As the 'X' value (bottom) gets higher, the 'Y' value (side) also tends to get higher.\"",
                slide4_conc: "<strong>Good Conclusion:</strong> \"There appears to be a *positive correlation* between X and Y.\"",
                slide4_chart_label: "Relationship",
                slide5_title: "Tips for Great Analysis",
                slide5_obs_title: "Good Observations Are:",
                slide5_obs1: "<strong>Specific:</strong> Use numbers, labels, and dates. (\"Sales in March were $180k.\")",
                slide5_obs2: "<strong>Factual:</strong> Only state what you can see. Don't guess *why*... yet.",
                slide5_obs3: "<strong>Comparative:</strong> Compare values. (\"March was $30k higher than February.\")",
                slide5_conc_title: "Good Conclusions Are:",
                slide5_conc1: "<strong>The \"Big Picture\":</strong> What's the main story? The \"so what?\"",
                slide5_conc2: "<strong>An Inference:</strong> Based on your observations, what does it *mean*?",
                slide5_conc3: "<strong>Actionable (Optional):</strong> What might you do based on this? (\"We should find out what happened in March.\")",
                // Chart 1
                chart1_p1_correct: "Vertical Bar Chart",
                chart1_p1_decoy1: "Line Chart",
                chart1_p1_decoy2: "Pie Chart",
                chart1_p1_decoy3: "Scatter Plot",
                chart1_p2_correct1: "March had the highest sales, at 180k.",
                chart1_p2_correct2: "April had the lowest sales, at 90k.",
                chart1_p2_correct3: "Sales increased from Jan to Mar, then decreased.",
                chart1_p2_decoy1: "Sales in February were 120k.",
                chart1_p2_decoy2: "May had the highest sales.",
                chart1_p2_decoy3: "All months had sales above 100k.",
                chart1_p2_decoy4: "Sales show a consistent upward trend.",
                chart1_p2_decoy5: "The chart shows sales for 6 months.",
                chart1_p2_decoy6: "January and May had the same sales.",
                chart1_p3_correct: "Sales peaked in March, and April saw a significant drop.",
                chart1_p3_decoy1: "The company is failing because sales dropped in April.",
                chart1_p3_decoy2: "Sales are unstable and unpredictable.",
                chart1_p3_decoy3: "May is a recovery month for the company.",
                // Chart 2
                chart2_p1_correct: "Line Chart",
                chart2_p1_decoy1: "Bar Chart",
                chart2_p1_decoy2: "Area Chart",
                chart2_p1_decoy3: "Horizontal Bar Chart",
                chart2_p2_correct1: "Week 4 had the highest traffic, at 1900 visitors.",
                chart2_p2_correct2: "Traffic dropped from Week 2 to Week 3.",
                chart2_p2_correct3: "The lowest traffic was in Week 1, at 1500 visitors.",
                chart2_p2_decoy1: "Traffic was highest in Week 3.",
                chart2_p2_decoy2: "Traffic consistently increased every week.",
                chart2_p2_decoy3: "The chart shows a total of 1900 visitors.",
                chart2_p2_decoy4: "Week 2 and Week 4 had the same traffic.",
                chart2_p2_decoy5: "Traffic in Week 3 was 1750.",
                chart2_p2_decoy6: "The chart shows website sales.",
                chart2_p3_correct: "Overall, website traffic shows an upward trend, despite a dip in Week 3.",
                chart2_p3_decoy1: "The website is growing extremely fast.",
                chart2_p3_decoy2: "Week 3 was a bad week for the company.",
                chart2_p3_decoy3: "The website will reach 2000 visitors in Week 5.",
                // Chart 3
                chart3_p1_correct: "Pie Chart",
                chart3_p1_decoy1: "Doughnut Chart",
                chart3_p1_decoy2: "Polar Area Chart",
                chart3_p1_decoy3: "Radar Chart",
                chart3_p2_correct1: "R&D has the largest share of the budget (35%).",
                chart3_p2_correct2: "Admin has the smallest share of the budget (10%).",
                chart3_p2_correct3: "Marketing (30%) and Sales (25%) together make up over half the budget.",
                chart3_p2_decoy1: "Sales has the largest budget.",
                chart3_p2_decoy2: "R&D and Admin have the same budget.",
                chart3_p2_decoy3: "The total budget is $100.",
                chart3_p2_decoy4: "All departments have at least 20% of the budget.",
                chart3_p2_decoy5: "Marketing has the smallest budget.",
                chart3_p2_decoy6: "This chart shows budget growth over time.",
                chart3_p3_correct: "The budget is primarily allocated to R&D, followed closely by Marketing and Sales.",
                chart3_p3_decoy1: "Admin is the most important department.",
                chart3_p3_decoy2: "R&D is over-funded.",
                chart3_p3_decoy3: "The company spends the most on R&D.",
                // Chart 4
                chart4_p1_correct: "Horizontal Bar Chart",
                chart4_p1_decoy1: "Vertical Bar Chart",
                chart4_p1_decoy2: "Stacked Bar Chart",
                chart4_p1_decoy3: "Line Chart",
                chart4_p2_correct1: "Bananas are the most favorite fruit, with 65 votes.",
                chart4_p2_correct2: "Grapes are the least favorite fruit, with 20 votes.",
                chart4_p2_correct3: "Apples (50 votes) are more popular than Oranges (35 votes).",
                chart4_p2_decoy1: "Apples are the most favorite fruit.",
                chart4_p2_decoy2: "Bananas and Apples have the same number of votes.",
                chart4_p2_decoy3: "The survey had 100 participants.",
                chart4_p2_decoy4: "Grapes are more popular than Oranges.",
                chart4_p2_decoy5: "All fruits got at least 30 votes.",
                chart4_p2_decoy6: "This chart shows the price of fruit.",
                chart4_p3_correct: "Bananas are the clear favorite in this survey, with Grapes being the least popular.",
                chart4_p3_decoy1: "Everyone loves bananas.",
                chart4_p3_decoy2: "Apples and Oranges are not popular.",
                chart4_p3_decoy3: "Fruit is very popular.",
                // Chart 5
                chart5_p1_correct: "Doughnut Chart",
                chart5_p1_decoy1: "Pie Chart",
                chart5_p1_decoy2: "Radar Chart",
                chart5_p1_decoy3: "Gauge Chart",
                chart5_p2_correct1: "Desktop is the most used device, at 65%.",
                chart5_p2_correct2: "Tablet is the least used device, at 5%.",
                chart5_p2_correct3: "Mobile usage (30%) is six times higher than Tablet usage (5%).",
                chart5_p2_decoy1: "Mobile is the most used device.",
                chart5_p2_decoy2: "Desktop and Mobile have similar usage.",
                chart5_p2_decoy3: "Tablet usage is 50%.",
                chart5_p2_decoy4: "This chart shows usage in 5 categories.",
                chart5_p2_decoy5: "Everyone uses a Desktop.",
                chart5_p2_decoy6: "Mobile and Tablet combined are more popular than Desktop.",
                chart5_p3_correct: "The vast majority of users access the service via Desktop.",
                chart5_p3_decoy1: "Nobody uses Tablets anymore.",
                chart5_p3_decoy2: "Mobile usage is catching up to Desktop.",
                chart5_p3_decoy3: "This company needs a new mobile app.",
                // Placeholders
                placeholder_p1_correct: "Correct Type",
                placeholder_p1_decoy1: "Decoy Type 1",
                placeholder_p1_decoy2: "Decoy Type 2",
                placeholder_p1_decoy3: "Decoy Type 3",
                placeholder_p2_correct1: "Correct Obs 1",
                placeholder_p2_correct2: "Correct Obs 2",
                placeholder_p2_correct3: "Correct Obs 3",
                placeholder_p2_decoy1: "Decoy Obs 1",
                placeholder_p2_decoy2: "Decoy Obs 2",
                placeholder_p2_decoy3: "Decoy Obs 3",
                placeholder_p2_decoy4: "Decoy Obs 4",
                placeholder_p2_decoy5: "Decoy Obs 5",
                placeholder_p2_decoy6: "Decoy Obs 6",
                placeholder_p3_correct: "Correct Conclusion",
                placeholder_p3_decoy1: "Decoy Conclusion 1",
                placeholder_p3_decoy2: "Decoy Conclusion 2",
                placeholder_p3_decoy3: "Decoy Conclusion 3"
            },
            // Russian
            ru: {
                mainTitle: "Анализ диаграмм",
                mainSubtitle: "Выберите лучшие варианты на основе диаграммы.",
                lessonButtonTitle: "Открыть урок",
                analysisTitle: "Анализ вашей группы",
                part1Label: "1. Определите тип диаграммы:",
                part2Label: "2. Сделайте 3 наблюдения: (Выбрано: {0}/3)",
                part3Label: "3. Сделайте 1 вывод:",
                checkButton: "Проверить анализ",
                checkButtonComplete: "Анализ завершен",
                nextButton: "Следующая диаграмма",
                scorePrefix: "Ваш счет:",
                chart: "Диаграмма",
                of: "из",
                lessonTitle: "Урок по анализу диаграмм",
                lessonPrev: "Назад",
                lessonNext: "Вперед",
                slideIndicator: "Слайд {0} из {1}",
                slide0_title: "Добро пожаловать! Что такое визуализация данных?",
                slide0_p1: "Визуализация данных - это практика превращения данных (чисел и текста) в наглядные диаграммы или графики.",
                slide0_p2: "Зачем мы это делаем? Потому что наш мозг *гораздо* лучше понимает картинки, чем длинные списки цифр! Хорошая диаграмма рассказывает историю быстро и понятно.",
                slide0_taskTitle: "Ваша задача:",
                slide0_task1: "<strong>1. Определить диаграмму:</strong> Что это за диаграмма? (Гистограмма, Линейный, Круговая и т.д.)",
                slide0_task2: "<strong>2. Сделать наблюдения:</strong> Что вы *видите*? Констатируйте факты. (напр., \"Продажи в марте составили $180k\", \"Трафик сайта растет.\")",
                slide0_task3: "<strong>3. Сделать вывод:</strong> Что это *означает*? В чем главная суть? (напр., \"Март был лучшим месяцем по продажам\", \"Наш сайт становится популярнее.\")",
                slide1_title: "Тип диаграммы: Гистограмма",
                slide1_p1: "Гистограммы идеально подходят для сравнения значений в разных категориях.",
                slide1_read: "<strong>Как читать:</strong> Посмотрите на *длину* каждого столбца. Чем длиннее столбец, тем больше значение.",
                slide1_obs: "<strong>Хорошее наблюдение:</strong> \"Категория B имеет наибольшее значение (50).\" или \"Категория C - наименьшее (10).\"",
                slide1_conc: "<strong>Хороший вывод:</strong> \"Категория B - самый популярный выбор.\"",
                slide1_chart_label: "Значение",
                slide1_chart_catA: "Категория A",
                slide1_chart_catB: "Категория B",
                slide1_chart_catC: "Категория C",
                slide2_title: "Тип диаграммы: Линейный график",
                slide2_p1: "Линейные графики - лучший способ показать *тренд* за определенный период времени (дни, месяцы, годы).",
                slide2_read: "<strong>Как читать:</strong> Следите за линией слева направо. Она идет вверх, вниз или остается ровной?",
                slide2_obs: "<strong>Хорошее наблюдение:</strong> \"Значение выросло с 10 в январе до 45 в апреле.\" или \"В марте было небольшое падение.\"",
                slide2_conc: "<strong>Хороший вывод:</strong> \"Тренд положительный, что говорит о росте в первом квартале.\"",
                slide2_chart_label: "Тренд",
                slide3_title: "Тип диаграммы: Круговая диаграмма",
                slide3_p1: "Круговые диаграммы используются для отображения *пропорций* или процентов. Они показывают, как целый \"пирог\" делится на части.",
                slide3_read: "<strong>Как читать:</strong> Посмотрите на *размер* каждого сектора. Чем больше сектор, тем больше процент.",
                slide3_obs: "<strong>Хорошее наблюдение:</strong> \"Красный - самый большой сектор, занимающий половину (50%) от общего.\"",
                slide3_conc: "<strong>Хороший вывод:</strong> \"Категория 'Красный' составляет большую часть бюджета.\"",
                slide3_chart_red: "Красный",
                slide3_chart_blue: "Синий",
                slide3_chart_yellow: "Желтый",
                slide4_title: "Тип диаграммы: Диаграмма рассеяния",
                slide4_p1: "Диаграммы рассеяния показывают *связь* между двумя различными числовыми значениями. Они помогают увидеть, влияет ли одно на другое.",
                slide4_read: "<strong>Как читать:</strong> Посмотрите на общее расположение точек. Идут ли они вверх слева направо? Вниз? Или это просто случайное облако?",
                slide4_obs: "<strong>Хорошее наблюдение:</strong> \"По мере увеличения значения 'X' (внизу), значение 'Y' (сбоку) также имеет тенденцию к увеличению.\"",
                slide4_conc: "<strong>Хороший вывод:</strong> \"По-видимому, существует *положительная корреляция* между X и Y.\"",
                slide4_chart_label: "Связь",
                slide5_title: "Советы по отличному анализу",
                slide5_obs_title: "Хорошие наблюдения:",
                slide5_obs1: "<strong>Конкретные:</strong> Используйте цифры, названия и даты. (\"Продажи в марте составили $180k.\")",
                slide5_obs2: "<strong>Фактические:</strong> Говорите только то, что видите. Пока не гадайте *почему*.",
                slide5_obs3: "<strong>Сравнительные:</strong> Сравнивайте значения. (\"Март был на $30k выше, чем февраль.\")",
                slide5_conc_title: "Хорошие выводы:",
                slide5_conc1: "<strong>\"Общая картина\":</strong> В чем главная история? \"И что?\"",
                slide5_conc2: "<strong>Умозаключение:</strong> Исходя из ваших наблюдений, что это *означает*?",
                slide5_conc3: "<strong>Побуждение к действию (необязательно):</strong> Что вы могли бы сделать на основе этого? (\"Нам нужно выяснить, что случилось в марте.\")",
                chart1_p1_correct: "Вертикальная гистограмма",
                chart1_p1_decoy1: "Линейный график",
                chart1_p1_decoy2: "Круговая диаграмма",
                chart1_p1_decoy3: "Диаграмма рассеяния",
                chart1_p2_correct1: "В марте были самые высокие продажи - 180k.",
                chart1_p2_correct2: "В апреле были самые низкие продажи - 90k.",
                chart1_p2_correct3: "Продажи росли с января по март, затем снизились.",
                chart1_p2_decoy1: "Продажи в феврале составили 120k.",
                chart1_p2_decoy2: "В мае были самые высокие продажи.",
                chart1_p2_decoy3: "Во все месяцы продажи превышали 100k.",
                chart1_p2_decoy4: "Продажи показывают постоянный рост.",
                chart1_p2_decoy5: "Диаграмма показывает продажи за 6 месяцев.",
                chart1_p2_decoy6: "В январе и мае были одинаковые продажи.",
                chart1_p3_correct: "Продажи достигли пика в марте, а в апреле произошло значительное падение.",
                chart1_p3_decoy1: "Компания терпит неудачу, потому что продажи упали в апреле.",
                chart1_p3_decoy2: "Продажи нестабильны и непредсказуемы.",
                chart1_p3_decoy3: "Май - месяц восстановления для компании.",
                chart2_p1_correct: "Линейный график",
                chart2_p1_decoy1: "Гистограмма",
                chart2_p1_decoy2: "Диаграмма с областями",
                chart2_p1_decoy3: "Горизонтальная гистограмма",
                chart2_p2_correct1: "На 4-й неделе был самый высокий трафик - 1900 посетителей.",
                chart2_p2_correct2: "Трафик упал со 2-й по 3-ю неделю.",
                chart2_p2_correct3: "Самый низкий трафик был на 1-й неделе - 1500 посетителей.",
                chart2_p2_decoy1: "Самый высокий трафик был на 3-й неделе.",
                chart2_p2_decoy2: "Трафик постоянно рос каждую неделю.",
                chart2_p2_decoy3: "Диаграмма показывает всего 1900 посетителей.",
                chart2_p2_decoy4: "На 2-й и 4-й неделях был одинаковый трафик.",
                chart2_p2_decoy5: "Трафик на 3-й неделе составил 1750.",
                chart2_p2_decoy6: "Диаграмма показывает продажи сайта.",
                chart2_p3_correct: "В целом, трафик сайта показывает тенденцию к росту, несмотря на спад на 3-й неделе.",
                chart2_p3_decoy1: "Сайт растет чрезвычайно быстро.",
                chart2_p3_decoy2: "3-я неделя была плохой для компании.",
                chart2_p3_decoy3: "На 5-й неделе сайт достигнет 2000 посетителей.",
                chart3_p1_correct: "Круговая диаграмма",
                chart3_p1_decoy1: "Кольцевая диаграмма",
                chart3_p1_decoy2: "Полярная диаграмма",
                chart3_p1_decoy3: "Лепестковая диаграмма",
                chart3_p2_correct1: "У R&D самая большая доля бюджета (35%).",
                chart3_p2_correct2: "У Admin самая маленькая доля бюджета (10%).",
                chart3_p2_correct3: "Маркетинг (30%) и Продажи (25%) вместе составляют более половины бюджета.",
                chart3_p2_decoy1: "У Продаж самый большой бюджет.",
                chart3_p2_decoy2: "У R&D и Admin одинаковый бюджет.",
                chart3_p2_decoy3: "Общий бюджет составляет $100.",
                chart3_p2_decoy4: "У всех отделов не менее 20% бюджета.",
                chart3_p2_decoy5: "У Маркетинга самый маленький бюджет.",
                chart3_p2_decoy6: "Эта диаграмма показывает рост бюджета со временем.",
                chart3_p3_correct: "Бюджет в основном выделяется на R&D, за которым следуют Маркетинг и Продажи.",
                chart3_p3_decoy1: "Admin - самый важный отдел.",
                chart3_p3_decoy2: "R&D перефинансирован.",
                chart3_p3_decoy3: "Компания тратит больше всего на R&D.",
                chart4_p1_correct: "Горизонтальная гистограмма",
                chart4_p1_decoy1: "Вертикальная гистограмма",
                chart4_p1_decoy2: "Сложенная гистограмма",
                chart4_p1_decoy3: "Линейный график",
                chart4_p2_correct1: "Бананы - самый любимый фрукт (65 голосов).",
                chart4_p2_correct2: "Виноград - наименее любимый фрукт (20 голосов).",
                chart4_p2_correct3: "Яблоки (50 голосов) популярнее Апельсинов (35 голосов).",
                chart4_p2_decoy1: "Яблоки - самый любимый фрукт.",
                chart4_p2_decoy2: "У Бананов и Яблок одинаковое количество голосов.",
                chart4_p2_decoy3: "В опросе участвовало 100 человек.",
                chart4_p2_decoy4: "Виноград популярнее Апельсинов.",
                chart4_p2_decoy5: "Все фрукты набрали не менее 30 голосов.",
                chart4_p2_decoy6: "Эта диаграмма показывает цены на фрукты.",
                chart4_p3_correct: "Бананы - явный фаворит в этом опросе, а Виноград - наименее популярен.",
                chart4_p3_decoy1: "Все любят бананы.",
                chart4_p3_decoy2: "Яблоки и Апельсины не популярны.",
                chart4_p3_decoy3: "Фрукты очень популярны.",
                chart5_p1_correct: "Кольцевая диаграмма",
                chart5_p1_decoy1: "Круговая диаграмма",
                chart5_p1_decoy2: "Лепестковая диаграмма",
                chart5_p1_decoy3: "Сенсорная диаграмма",
                chart5_p2_correct1: "Настольные ПК - наиболее используемое устройство (65%).",
                chart5_p2_correct2: "Планшеты - наименее используемое устройство (5%).",
                chart5_p2_correct3: "Использование мобильных (30%) в шесть раз выше, чем планшетов (5%).",
                chart5_p2_decoy1: "Мобильные - наиболее используемое устройство.",
                chart5_p2_decoy2: "Настольные ПК и мобильные используются одинаково.",
                chart5_p2_decoy3: "Использование планшетов составляет 50%.",
                chart5_p2_decoy4: "Эта диаграмма показывает использование в 5 категориях.",
                chart5_p2_decoy5: "Все используют настольные ПК.",
                chart5_p2_decoy6: "Мобильные и планшеты вместе популярнее настольных ПК.",
                chart5_p3_correct: "Подавляющее большинство пользователей заходят на сервис с настольных ПК.",
                chart5_p3_decoy1: "Планшетами больше никто не пользуется.",
                chart5_p3_decoy2: "Использование мобильных догоняет настольные ПК.",
                chart5_p3_decoy3: "Этой компании нужно новое мобильное приложение.",
                placeholder_p1_correct: "Верный тип",
                placeholder_p1_decoy1: "Неверный тип 1",
                placeholder_p1_decoy2: "Неверный тип 2",
                placeholder_p1_decoy3: "Неверный тип 3",
                placeholder_p2_correct1: "Верное наблюдение 1",
                placeholder_p2_correct2: "Верное наблюдение 2",
                placeholder_p2_correct3: "Верное наблюдение 3",
                placeholder_p2_decoy1: "Неверное наблюдение 1",
                placeholder_p2_decoy2: "Неверное наблюдение 2",
                placeholder_p2_decoy3: "Неверное наблюдение 3",
                placeholder_p2_decoy4: "Неверное наблюдение 4",
                placeholder_p2_decoy5: "Неверное наблюдение 5",
                placeholder_p2_decoy6: "Неверное наблюдение 6",
                placeholder_p3_correct: "Верный вывод",
                placeholder_p3_decoy1: "Неверный вывод 1",
                placeholder_p3_decoy2: "Неверный вывод 2",
                placeholder_p3_decoy3: "Неверный вывод 3"
            },
            // Turkish
            tr: {
                mainTitle: "Grafik Analiz Etkinliği",
                mainSubtitle: "Görsele göre en iyi seçenekleri seçin.",
                lessonButtonTitle: "Dersi Aç",
                analysisTitle: "Grubunuzun Analizi",
                part1Label: "1. Görselin türünü belirleyin:",
                part2Label: "2. 3 gözlem yapın: (Seçilen: {0}/3)",
                part3Label: "3. 1 sonuç çıkarın:",
                checkButton: "Analizi Kontrol Et",
                checkButtonComplete: "Analiz Tamamlandı",
                nextButton: "Sonraki Grafik",
                scorePrefix: "Skorunuz:",
                chart: "Grafik",
                of: "/",
                lessonTitle: "Grafik Analiz Dersi",
                lessonPrev: "Önceki",
                lessonNext: "Sonraki",
                slideIndicator: "Slayt {0} / {1}",
                slide0_title: "Hoş Geldiniz! Veri Görselleştirme Nedir?",
                slide0_p1: "Veri görselleştirme, verileri (sayılar ve metinler) görsel bir grafiğe dönüştürme pratiğidir.",
                slide0_p2: "Bunu neden yapıyoruz? Çünkü beynimiz resimleri anlamakta uzun sayı listelerinden *çok* daha iyidir! İyi bir grafik, bir hikayeyi hızlı ve net bir şekilde anlatır.",
                slide0_taskTitle: "Göreviniz:",
                slide0_task1: "<strong>1. Görseli Tanımlayın:</strong> Bu ne tür bir grafik? (Çubuk, Çizgi, Pasta vb.)",
                slide0_task2: "<strong>2. Gözlem Yapın:</strong> Ne *görüyorsunuz*? Gerçekleri belirtin. (Örn: \"Mart ayında satışlar 180 bin dolardı\", \"Web sitesi trafiği artıyor.\")",
                slide0_task3: "<strong>3. Sonuç Çıkarın:</strong> Bu ne *anlama* geliyor? Ana fikir nedir? (Örn: \"Mart en iyi satış ayımızdı\", \"Web sitemiz daha popüler hale geliyor.\")",
                slide1_title: "Grafik Türü: Çubuk Grafik",
                slide1_p1: "Çubuk grafikler, farklı kategorilerdeki değerleri karşılaştırmak için mükemmeldir.",
                slide1_read: "<strong>Nasıl Okunur:</strong> Her çubuğun *uzunluğuna* bakın. Çubuk ne kadar uzunsa, değer o kadar büyüktür.",
                slide1_obs: "<strong>İyi Gözlem:</strong> \"Kategori B en yüksek değere (50) sahip.\" veya \"Kategori C en düşük (10).\"",
                slide1_conc: "<strong>İyi Sonuç:</strong> \"Kategori B en popüler seçenektir.\"",
                slide1_chart_label: "Değer",
                slide1_chart_catA: "Kategori A",
                slide1_chart_catB: "Kategori B",
                slide1_chart_catC: "Kategori C",
                slide2_title: "Grafik Türü: Çizgi Grafik",
                slide2_p1: "Çizgi grafikler, belirli bir süre (günler, aylar, yıllar) içindeki bir *eğilimi* göstermenin en iyi yoludur.",
                slide2_read: "<strong>Nasıl Okunur:</strong> Çizgiyi soldan sağa takip edin. Yukarı mı, aşağı mı gidiyor, yoksa düz mü kalıyor?",
                slide2_obs: "<strong>İyi Gözlem:</strong> \"Değer Ocak'ta 10'dan Nisan'da 45'e yükseldi.\" veya \"Mart'ta küçük bir düşüş oldu.\"",
                slide2_conc: "<strong>İyi Sonuç:</strong> \"Eğilim pozitif, ilk çeyrekte büyüme gösteriyor.\"",
                slide2_chart_label: "Eğilim",
                slide3_title: "Grafik Türü: Pasta Grafik",
                slide3_p1: "Pasta grafikler, *oranları* veya yüzdeleri göstermek için kullanılır. Bütün bir \"pastanın\" parçalara nasıl bölündüğünü gösterirler.",
                slide3_read: "<strong>Nasıl Okunur:</strong> Her dilimin *büyüklüğüne* bakın. Dilim ne kadar büyükse, yüzde o kadar büyüktür.",
                slide3_obs: "<strong>İyi Gözlem:</strong> \"Kırmızı, toplamın yarısını (%50) alarak en büyük dilimdir.\"",
                slide3_conc: "<strong>İyi Sonuç:</strong> \"Bütçenin çoğunluğunu 'Kırmızı' kategori oluşturuyor.\"",
                slide3_chart_red: "Kırmızı",
                slide3_chart_blue: "Mavi",
                slide3_chart_yellow: "Sarı",
                slide4_title: "Grafik Türü: Dağılım Grafiği",
                slide4_p1: "Dağılım grafikleri, iki farklı sayısal değer arasındaki *ilişkiyi* gösterir. Bir şeyin diğerini etkileyip etkilemediğini görmemize yardımcı olurlar.",
                slide4_read: "<strong>Nasıl Okunur:</strong> Noktaların genel desenine bakın. Soldan sağa yukarı mı gidiyorlar? Aşağı mı? Yoksa sadece rastgele bir bulut mu?",
                slide4_obs: "<strong>İyi Gözlem:</strong> \"'X' değeri (alt) yükseldikçe, 'Y' değeri (yan) de yükselme eğilimindedir.\"",
                slide4_conc: "<strong>İyi Sonuç:</strong> \"X ve Y arasında *pozitif bir korelasyon* var gibi görünüyor.\"",
                slide4_chart_label: "İlişki",
                slide5_title: "Harika Analiz İçin İpuçları",
                slide5_obs_title: "İyi Gözlemler:",
                slide5_obs1: "<strong>Spesifiktir:</strong> Sayıları, etiketleri ve tarihleri kullanın. (\"Mart ayındaki satışlar 180 bin dolardı.\")",
                slide5_obs2: "<strong>Gerçeklere Dayanır:</strong> Yalnızca gördüğünüzü belirtin. Henüz *neden* diye tahmin etmeyin.",
                slide5_obs3: "<strong>Karşılaştırmalıdır:</strong> Değerleri karşılaştırın. (\"Mart, Şubat'tan 30 bin dolar daha yüksekti.\")",
                slide5_conc_title: "İyi Sonuçlar:",
                slide5_conc1: "<strong>\"Büyük Resim\":</strong> Ana hikaye nedir? \"Eee, yani?\"",
                slide5_conc2: "<strong>Bir Çıkarım:</strong> Gözlemlerinize dayanarak, bu ne *anlama* geliyor?",
                slide5_conc3: "<strong>Eyleme Geçirilebilir (İsteğe bağlı):</strong> Buna dayanarak ne yapabilirsiniz? (\"Mart ayında ne olduğunu bulmalıyız.\")",
                chart1_p1_correct: "Dikey Çubuk Grafik",
                chart1_p1_decoy1: "Çizgi Grafik",
                chart1_p1_decoy2: "Pasta Grafik",
                chart1_p1_decoy3: "Dağılım Grafiği",
                chart1_p2_correct1: "En yüksek satış 180k ile Mart ayında yapıldı.",
                chart1_p2_correct2: "En düşük satış 90k ile Nisan ayında yapıldı.",
                chart1_p2_correct3: "Satışlar Ocak'tan Mart'a yükseldi, sonra düştü.",
                chart1_p2_decoy1: "Şubat ayındaki satışlar 120k idi.",
                chart1_p2_decoy2: "En yüksek satış Mayıs ayındaydı.",
                chart1_p2_decoy3: "Tüm aylarda satışlar 100k'nin üzerindeydi.",
                chart1_p2_decoy4: "Satışlar tutarlı bir yükseliş trendi gösteriyor.",
                chart1_p2_decoy5: "Grafik 6 aylık satışları gösteriyor.",
                chart1_p2_decoy6: "Ocak ve Mayıs aylarındaki satışlar aynıydı.",
                chart1_p3_correct: "Satışlar Mart ayında zirve yaptı ve Nisan ayında belirgin bir düşüş yaşandı.",
                chart1_p3_decoy1: "Nisan ayında satışlar düştüğü için şirket batıyor.",
                chart1_p3_decoy2: "Satışlar istikrarsız ve tahmin edilemez.",
                chart1_p3_decoy3: "Mayıs ayı şirket için bir toparlanma ayıdır.",
                chart2_p1_correct: "Çizgi Grafik",
                chart2_p1_decoy1: "Çubuk Grafik",
                chart2_p1_decoy2: "Alan Grafiği",
                chart2_p1_decoy3: "Yatay Çubuk Grafik",
                chart2_p2_correct1: "En yüksek trafik 1900 ziyaretçi ile 4. Haftadaydı.",
                chart2_p2_correct2: "Trafik 2. Haftadan 3. Haftaya düştü.",
                chart2_p2_correct3: "En düşük trafik 1500 ziyaretçi ile 1. Haftadaydı.",
                chart2_p2_decoy1: "Trafik en yüksek 3. Haftadaydı.",
                chart2_p2_decoy2: "Trafik her hafta tutarlı bir şekilde arttı.",
                chart2_p2_decoy3: "Grafik toplam 1900 ziyaretçi gösteriyor.",
                chart2_p2_decoy4: "2. Hafta ve 4. Haftadaki trafik aynıydı.",
                chart2_p2_decoy5: "3. Haftadaki trafik 1750 idi.",
                chart2_p2_decoy6: "Grafik web sitesi satışlarını gösteriyor.",
                chart2_p3_correct: "Genel olarak, web sitesi trafiği 3. Haftadaki düşüşe rağmen yükseliş eğilimindedir.",
                chart2_p3_decoy1: "Web sitesi aşırı hızlı büyüyor.",
                chart2_p3_decoy2: "3. Hafta şirket için kötü bir haftaydı.",
                chart2_p3_decoy3: "Web sitesi 5. Haftada 2000 ziyaretçiye ulaşacak.",
                chart3_p1_correct: "Pasta Grafik",
                chart3_p1_decoy1: "Halka (Doughnut) Grafik",
                chart3_p1_decoy2: "Kutup Alan Grafiği",
                chart3_p1_decoy3: "Radar Grafik",
                chart3_p2_correct1: "Ar-Ge bütçeden en büyük payı (%35) alıyor.",
                chart3_p2_correct2: "Yönetim bütçeden en küçük payı (%10) alıyor.",
                chart3_p2_correct3: "Pazarlama (%30) ve Satış (%25) birlikte bütçenin yarısından fazlasını oluşturuyor.",
                chart3_p2_decoy1: "Satış en büyük bütçeye sahip.",
                chart3_p2_decoy2: "Ar-Ge ve Yönetim aynı bütçeye sahip.",
                chart3_p2_decoy3: "Toplam bütçe 100 Dolar.",
                chart3_p2_decoy4: "Tüm departmanlar bütçenin en az %20'sine sahip.",
                chart3_p2_decoy5: "Pazarlama en küçük bütçeye sahip.",
                chart3_p2_decoy6: "Bu grafik bütçe artışını zamanla gösteriyor.",
                chart3_p3_correct: "Bütçe öncelikli olarak Ar-Ge'ye ayrılmış, onu Pazarlama ve Satış takip ediyor.",
                chart3_p3_decoy1: "Yönetim en önemli departman.",
                chart3_p3_decoy2: "Ar-Ge'ye gereğinden fazla fon ayrılmış.",
                chart3_p3_decoy3: "Şirket en çok Ar-Ge'ye harcıyor.",
                chart4_p1_correct: "Yatay Çubuk Grafik",
                chart4_p1_decoy1: "Dikey Çubuk Grafik",
                chart4_p1_decoy2: "Yığılmış Çubuk Grafik",
                chart4_p1_decoy3: "Çizgi Grafik",
                chart4_p2_correct1: "Muz, 65 oyla en sevilen meyvedir.",
                chart4_p2_correct2: "Üzüm, 20 oyla en az sevilen meyvedir.",
                chart4_p2_correct3: "Elma (50 oy), Portakaldan (35 oy) daha popülerdir.",
                chart4_p2_decoy1: "Elma en sevilen meyvedir.",
                chart4_p2_decoy2: "Muz ve Elma aynı sayıda oya sahip.",
                chart4_p2_decoy3: "Ankete 100 kişi katıldı.",
                chart4_p2_decoy4: "Üzüm, Portakaldan daha popülerdir.",
                chart4_p2_decoy5: "Tüm meyveler en az 30 oy aldı.",
                chart4_p2_decoy6: "Bu grafik meyve fiyatlarını gösteriyor.",
                chart4_p3_correct: "Bu ankette Muz açık ara favoriyken, Üzüm en az popüler olanıdır.",
                chart4_p3_decoy1: "Herkes muzu sever.",
                chart4_p3_decoy2: "Elma ve Portakal popüler değil.",
                chart4_p3_decoy3: "Meyve çok popüler.",
                chart5_p1_correct: "Halka (Doughnut) Grafik",
                chart5_p1_decoy1: "Pasta Grafik",
                chart5_p1_decoy2: "Radar Grafik",
                chart5_p1_decoy3: "Gösterge Grafiği",
                chart5_p2_correct1: "Masaüstü, %65 ile en çok kullanılan cihazdır.",
                chart5_p2_correct2: "Tablet, %5 ile en az kullanılan cihazdır.",
                chart5_p2_correct3: "Mobil kullanım (%30), Tablet kullanımından (%5) altı kat daha fazladır.",
                chart5_p2_decoy1: "Mobil, en çok kullanılan cihazdır.",
                chart5_p2_decoy2: "Masaüstü ve Mobil benzer kullanıma sahip.",
                chart5_p2_decoy3: "Tablet kullanımı %50'dir.",
                chart5_p2_decoy4: "Bu grafik 5 kategorideki kullanımı gösteriyor.",
                chart5_p2_decoy5: "Herkes Masaüstü kullanıyor.",
                chart5_p2_decoy6: "Mobil ve Tabletin toplamı Masaüstünden daha popüler.",
                chart5_p3_correct: "Kullanıcıların büyük çoğunluğu hizmete Masaüstü üzerinden erişiyor.",
                chart5_p3_decoy1: "Artık kimse Tablet kullanmıyor.",
                chart5_p3_decoy2: "Mobil kullanım Masaüstünü yakalıyor.",
                chart5_p3_decoy3: "Bu şirketin yeni bir mobil uygulamaya ihtiyacı var.",
                placeholder_p1_correct: "Doğru Tür",
                placeholder_p1_decoy1: "Yanıltıcı Tür 1",
                placeholder_p1_decoy2: "Yanıltıcı Tür 2",
                placeholder_p1_decoy3: "Yanıltıcı Tür 3",
                placeholder_p2_correct1: "Doğru Gözlem 1",
                placeholder_p2_correct2: "Doğru Gözlem 2",
                placeholder_p2_correct3: "Doğru Gözlem 3",
                placeholder_p2_decoy1: "Yanıltıcı Gözlem 1",
                placeholder_p2_decoy2: "Yanıltıcı Gözlem 2",
                placeholder_p2_decoy3: "Yanıltıcı Gözlem 3",
                placeholder_p2_decoy4: "Yanıltıcı Gözlem 4",
                placeholder_p2_decoy5: "Yanıltıcı Gözlem 5",
                placeholder_p2_decoy6: "Yanıltıcı Gözlem 6",
                placeholder_p3_correct: "Doğru Sonuç",
                placeholder_p3_decoy1: "Yanıltıcı Sonuç 1",
                placeholder_p3_decoy2: "Yanıltıcı Sonuç 2",
                placeholder_p3_decoy3: "Yanıltıcı Sonuç 3"
            },
            // Chinese
            zh: {
                mainTitle: "图表分析活动",
                mainSubtitle: "根据图表选择最佳选项。",
                lessonButtonTitle: "打开课程",
                analysisTitle: "您的小组分析",
                part1Label: "1. 识别图表类型：",
                part2Label: "2. 写出3个观察点：（已选：{0}/3）",
                part3Label: "3. 得出1个结论：",
                checkButton: "检查分析",
                checkButtonComplete: "分析完成",
                nextButton: "下一个图表",
                scorePrefix: "你的分数：",
                chart: "图表",
                of: "之",
                lessonTitle: "图表分析课程",
                lessonPrev: "上一个",
                lessonNext: "下一个",
                slideIndicator: "幻灯片 {0} / {1}",
                slide0_title: "欢迎！什么是数据可视化？",
                slide0_p1: "数据可视化是将数据（数字和文本）转换为可视化图表的实践。",
                slide0_p2: "我们为什么要这样做？因为我们的大脑理解图片的能力*远胜于*理解长串数字！一个好的图表能快速清晰地讲述一个故事。",
                slide0_taskTitle: "你的任务：",
                slide0_task1: "<strong>1. 识别图表：</strong> 这是什么类型的图表？（柱状图、折线图、饼图等）",
                slide0_task2: "<strong>2. 做出观察：</strong> 你*看*到了什么？陈述事实。（例如：“三月份的销售额为18万美元”，“网站流量正在上升。”）",
                slide0_task3: "<strong>3. 得出结论：</strong> 这*意味着*什么？“那又怎样？”或主要故事是什么？（例如：“三月是我们销售最好的月份”，“我们的网站越来越受欢迎。”）",
                slide1_title: "图表类型：柱状图",
                slide1_p1: "柱状图非常适合比较不同类别的值。",
                slide1_read: "<strong>如何阅读：</strong> 查看每个柱子的*长度*。柱子越长，值越大。",
                slide1_obs: "<strong>好的观察：</strong> “B类的最高值（50）。”或“C类是最低的（10）。”",
                slide1_conc: "<strong>好的结论：</strong> “B类是最受欢迎的选择。”",
                slide1_chart_label: "值",
                slide1_chart_catA: "A类",
                slide1_chart_catB: "B类",
                slide1_chart_catC: "C类",
                slide2_title: "图表类型：折线图",
                slide2_p1: "折线图是显示一段时间（如天、月或年）内*趋势*的最佳方式。",
                slide2_read: "<strong>如何阅读：</strong> 从左到右跟随线条。它是上升、下降还是持平？",
                slide2_obs: "<strong>好的观察：</strong> “该值从1月的10增加到4月的45。”或“3月有小幅下降。”",
                slide2_conc: "<strong>好的结论：</strong> “趋势是积极的，显示了第一季度的增长。”",
                slide2_chart_label: "趋势",
                slide3_title: "图表类型：饼图",
                slide3_p1: "饼图用于显示*比例*或百分比。它们显示一个完整的“饼”如何被分成几部分。",
                slide3_read: "<strong>如何阅读：</strong> 查看每个扇形的*大小*。扇形越大，百分比越大。",
                slide3_obs: "<strong>好的观察：</strong> “红色是最大的扇形，占总量的一半（50%）。”",
                slide3_conc: "<strong>好的结论：</strong> “'红色'类别占了预算的大部分。”",
                slide3_chart_red: "红色",
                slide3_chart_blue: "蓝色",
                slide3_chart_yellow: "黄色",
                slide4_title: "图表类型：散点图",
                slide4_p1: "散点图显示两个不同数值之间的*关系*。它们帮助我们看一个事物是否影响另一个事物。",
                slide4_read: "<strong>如何阅读：</strong> 查看点的整体模式。它们是从左到右上升吗？下降？还是只是一个随机的云？",
                slide4_obs: "<strong>好的观察：</strong> “随着'X'值（底部）变高，'Y'值（侧面）也倾向于变高。”",
                slide4_conc: "<strong>好的结论：</strong> “X和Y之间似乎存在*正相关*。”",
                slide4_chart_label: "关系",
                slide5_title: "优秀分析的技巧",
                slide5_obs_title: "好的观察是：",
                slide5_obs1: "<strong>具体的：</strong> 使用数字、标签和日期。（“三月份的销售额为18万美元。”）",
                slide5_obs2: "<strong>基于事实的：</strong> 只陈述你能看到的。暂时不要猜测*为什么*。",
                slide5_obs3: "<strong>比较性的：</strong> 比较数值。（“三月比二月高出3万美元。”）",
                slide5_conc_title: "好的结论是：",
                slide5_conc1: "<strong>“大局观”：</strong> 主要故事是什么？“那又怎样？”",
                slide5_conc2: "<strong>一个推论：</strong> 根据你的观察，这*意味着*什么？",
                slide5_conc3: "<strong>可操作的（可选）：</strong> 基于此你可以做什么？（“我们应该找出三月发生了什么。”）",
                chart1_p1_correct: "垂直柱状图",
                chart1_p1_decoy1: "折线图",
                chart1_p1_decoy2: "饼图",
                chart1_p1_decoy3: "散点图",
                chart1_p2_correct1: "三月的销售额最高，为18万。",
                chart1_p2_correct2: "四月的销售额最低，为9万。",
                chart1_p2_correct3: "销售额从一月到三月增长，然后下降。",
                chart1_p2_decoy1: "二月的销售额为12万。",
                chart1_p2_decoy2: "五月的销售额最高。",
                chart1_p2_decoy3: "所有月份的销售额都高于10万。",
                chart1_p2_decoy4: "销售额呈持续上升趋势。",
                chart1_p2_decoy5: "图表显示了6个月的销售额。",
                chart1_p2_decoy6: "一月和五月的销售额相同。",
                chart1_p3_correct: "销售额在三月达到顶峰，四月大幅下降。",
                chart1_p3_decoy1: "公司快要倒闭了，因为四月销售额下降了。",
                chart1_p3_decoy2: "销售额不稳定且不可预测。",
                chart1_p3_decoy3: "五月是公司的恢复月。",
                chart2_p1_correct: "折线图",
                chart2_p1_decoy1: "柱状图",
                chart2_p1_decoy2: "面积图",
                chart2_p1_decoy3: "水平柱状图",
                chart2_p2_correct1: "第4周的流量最高，为1900访客。",
                chart2_p2_correct2: "流量从第2周到第3周下降了。",
                chart2_p2_correct3: "最低流量在第1周，为1500访客。",
                chart2_p2_decoy1: "第3周的流量最高。",
                chart2_p2_decoy2: "流量每周都在持续增长。",
                chart2_p2_decoy3: "图表显示总共有1900访客。",
                chart2_p2_decoy4: "第2周和第4周的流量相同。",
                chart2_p2_decoy5: "第3周的流量是1750。",
                chart2_p2_decoy6: "图表显示了网站销售额。",
                chart2_p3_correct: "总体而言，尽管第3周有所下降，网站流量仍呈上升趋势。",
                chart2_p3_decoy1: "网站增长极其迅速。",
                chart2_p3_decoy2: "第3周对公司来说是糟糕的一周。",
                chart2_p3_decoy3: "网站将在第5周达到2000访客。",
                chart3_p1_correct: "饼图",
                chart3_p1_decoy1: "甜甜圈图",
                chart3_p1_decoy2: "极区图",
                chart3_p1_decoy3: "雷达图",
                chart3_p2_correct1: "研发部门的预算份额最大（35%）。",
                chart3_p2_correct2: "行政部门的预算份额最小（10%）。",
                chart3_p2_correct3: "市场（30%）和销售（25%）合计占预算的一半以上。",
                chart3_p2_decoy1: "销售部门的预算最大。",
                chart3_p2_decoy2: "研发和行政部门的预算相同。",
                chart3_p2_decoy3: "总预算是100美元。",
                chart3_p2_decoy4: "所有部门的预算都至少占20%。",
                chart3_p2_decoy5: "市场部门的预算最小。",
                chart3_p2_decoy6: "此图显示了预算随时间的增长。",
                chart3_p3_correct: "预算主要分配给研发部门，其次是市场和销售部门。",
                chart3_p3_decoy1: "行政部门是最重要的部门。",
                chart3_p3_decoy2: "研发部门资金过剩。",
                chart3_p3_decoy3: "公司在研发上花费最多。",
                chart4_p1_correct: "水平柱状图",
                chart4_p1_decoy1: "垂直柱状图",
                chart4_p1_decoy2: "堆叠柱状图",
                chart4_p1_decoy3: "折线图",
                chart4_p2_correct1: "香蕉是最受欢迎的水果，有65票。",
                chart4_p2_correct2: "葡萄是最不受欢迎的水果，有20票。",
                chart4_p2_correct3: "苹果（50票）比橙子（35票）更受欢迎。",
                chart4_p2_decoy1: "苹果是最受欢迎的水果。",
                chart4_p2_decoy2: "香蕉和苹果的票数相同。",
                chart4_p2_decoy3: "调查共有100名参与者。",
                chart4_p2_decoy4: "葡萄比橙子更受欢迎。",
                chart4_p2_decoy5: "所有水果都获得了至少30票。",
                chart4_p2_decoy6: "此图显示了水果的价格。",
                chart4_p3_correct: "在这次调查中，香蕉显然是最受欢迎的，而葡萄是最不受欢迎的。",
                chart4_p3_decoy1: "每个人都喜欢香蕉。",
                chart4_p3_decoy2: "苹果和橙子不受欢迎。",
                chart4_p3_decoy3: "水果非常受欢迎。",
                chart5_p1_correct: "甜甜圈图",
                chart5_p1_decoy1: "饼图",
                chart5_p1_decoy2: "雷达图",
                chart5_p1_decoy3: "仪表盘图",
                chart5_p2_correct1: "桌面设备是使用最多的设备，占65%。",
                chart5_p2_correct2: "平板电脑是使用最少的设备，占5%。",
                chart5_p2_correct3: "移动设备使用率（30%）是平板电脑使用率（5%）的六倍。",
                chart5_p2_decoy1: "移动设备是使用最多的设备。",
                chart5_p2_decoy2: "桌面设备和移动设备的使用率相似。",
                chart5_p2_decoy3: "平板电脑使用率为50%。",
                chart5_p2_decoy4: "此图显示了5个类别的使用情况。",
                chart5_p2_decoy5: "每个人都使用桌面设备。",
                chart5_p2_decoy6: "移动设备和平板电脑的总和比桌面设备更受欢迎。",
                chart5_p3_correct: "绝大多数用户通过桌面设备访问服务。",
                chart5_p3_decoy1: "再也没人使用平板电脑了。",
                chart5_p3_decoy2: "移动设备使用率正在赶上桌面设备。",
                chart5_p3_decoy3: "这家公司需要一个新的移动应用。",
                placeholder_p1_correct: "正确类型",
                placeholder_p1_decoy1: "诱饵类型1",
                placeholder_p1_decoy2: "诱饵类型2",
                placeholder_p1_decoy3: "诱饵类型3",
                placeholder_p2_correct1: "正确观察1",
                placeholder_p2_correct2: "正确观察2",
                placeholder_p2_correct3: "正确观察3",
                placeholder_p2_decoy1: "诱饵观察1",
                placeholder_p2_decoy2: "诱饵观察2",
                placeholder_p2_decoy3: "诱饵观察3",
                placeholder_p2_decoy4: "诱饵观察4",
                placeholder_p2_decoy5: "诱饵观察5",
                placeholder_p2_decoy6: "诱饵观察6",
                placeholder_p3_correct: "正确结论",
                placeholder_p3_decoy1: "诱饵结论1",
                placeholder_p3_decoy2: "诱饵结论2",
                placeholder_p3_decoy3: "诱饵结论3"
            }
        };

        // --- Chart Data Bank ---
        // Refactored to use translation keys instead of hard-coded text.
        const chartDataBank = [
            // 1. Vertical Bar Chart
            {
                type: 'bar',
                data: { labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May'], datasets: [{ label: 'Monthly Sales', data: [120, 150, 180, 90, 110], backgroundColor: 'rgba(54, 162, 235, 0.6)', borderColor: 'rgba(54, 162, 235, 1)', borderWidth: 1 }] },
                options: { plugins: { title: { display: true, text: 'Monthly Sales (in thousands)' } } },
                part1Options: {
                    correct: 'chart1_p1_correct',
                    decoys: ['chart1_p1_decoy1', 'chart1_p1_decoy2', 'chart1_p1_decoy3']
                },
                part2Options: {
                    correct: ['chart1_p2_correct1', 'chart1_p2_correct2', 'chart1_p2_correct3'],
                    decoys: ['chart1_p2_decoy1', 'chart1_p2_decoy2', 'chart1_p2_decoy3', 'chart1_p2_decoy4', 'chart1_p2_decoy5', 'chart1_p2_decoy6']
                },
                part3Options: {
                    correct: 'chart1_p3_correct',
                    decoys: ['chart1_p3_decoy1', 'chart1_p3_decoy2', 'chart1_p3_decoy3']
                }
            },
            // 2. Line Chart
            {
                type: 'line',
                data: { labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4'], datasets: [{ label: 'Website Traffic', data: [1500, 1750, 1600, 1900], fill: false, borderColor: 'rgba(75, 192, 192, 1)', tension: 0.1 }] },
                options: { plugins: { title: { display: true, text: 'Weekly Website Traffic' } } },
                part1Options: {
                    correct: 'chart2_p1_correct',
                    decoys: ['chart2_p1_decoy1', 'chart2_p1_decoy2', 'chart2_p1_decoy3']
                },
                part2Options: {
                    correct: ['chart2_p2_correct1', 'chart2_p2_correct2', 'chart2_p2_correct3'],
                    decoys: ['chart2_p2_decoy1', 'chart2_p2_decoy2', 'chart2_p2_decoy3', 'chart2_p2_decoy4', 'chart2_p2_decoy5', 'chart2_p2_decoy6']
                },
                part3Options: {
                    correct: 'chart2_p3_correct',
                    decoys: ['chart2_p3_decoy1', 'chart2_p3_decoy2', 'chart2_p3_decoy3']
                }
            },
            // 3. Pie Chart
            {
                type: 'pie',
                data: { labels: ['Marketing', 'Sales', 'R&D', 'Admin'], datasets: [{ label: 'Department Budget', data: [30, 25, 35, 10], backgroundColor: ['rgba(255, 99, 132, 0.6)', 'rgba(54, 162, 235, 0.6)', 'rgba(255, 206, 86, 0.6)', 'rgba(75, 192, 192, 0.6)'] }] },
                options: { plugins: { title: { display: true, text: 'Department Budget Allocation' } } },
                part1Options: {
                    correct: 'chart3_p1_correct',
                    decoys: ['chart3_p1_decoy1', 'chart3_p1_decoy2', 'chart3_p1_decoy3']
                },
                part2Options: {
                    correct: ['chart3_p2_correct1', 'chart3_p2_correct2', 'chart3_p2_correct3'],
                    decoys: ['chart3_p2_decoy1', 'chart3_p2_decoy2', 'chart3_p2_decoy3', 'chart3_p2_decoy4', 'chart3_p2_decoy5', 'chart3_p2_decoy6']
                },
                part3Options: {
                    correct: 'chart3_p3_correct',
                    decoys: ['chart3_p3_decoy1', 'chart3_p3_decoy2', 'chart3_p3_decoy3']
                }
            },
            // 4. Horizontal Bar Chart
            {
                type: 'bar',
                data: { labels: ['Apples', 'Oranges', 'Bananas', 'Grapes'], datasets: [{ label: 'Favorite Fruits', data: [50, 35, 65, 20], backgroundColor: 'rgba(153, 102, 255, 0.6)' }] },
                options: { indexAxis: 'y', plugins: { title: { display: true, text: 'Favorite Fruits Survey' } } },
                part1Options: {
                    correct: 'chart4_p1_correct',
                    decoys: ['chart4_p1_decoy1', 'chart4_p1_decoy2', 'chart4_p1_decoy3']
                },
                part2Options: {
                    correct: ['chart4_p2_correct1', 'chart4_p2_correct2', 'chart4_p2_correct3'],
                    decoys: ['chart4_p2_decoy1', 'chart4_p2_decoy2', 'chart4_p2_decoy3', 'chart4_p2_decoy4', 'chart4_p2_decoy5', 'chart4_p2_decoy6']
                },
                part3Options: {
                    correct: 'chart4_p3_correct',
                    decoys: ['chart4_p3_decoy1', 'chart4_p3_decoy2', 'chart4_p3_decoy3']
                }
            },
            // 5. Doughnut Chart
            {
                type: 'doughnut',
                data: { labels: ['Desktop', 'Mobile', 'Tablet'], datasets: [{ label: 'Device Usage', data: [65, 30, 5], backgroundColor: ['rgba(255, 159, 64, 0.6)', 'rgba(75, 192, 192, 0.6)', 'rgba(153, 102, 255, 0.6)'] }] },
                options: { plugins: { title: { display: true, text: 'Device Usage Share' } } },
                part1Options: {
                    correct: 'chart5_p1_correct',
                    decoys: ['chart5_p1_decoy1', 'chart5_p1_decoy2', 'chart5_p1_decoy3']
                },
                part2Options: {
                    correct: ['chart5_p2_correct1', 'chart5_p2_correct2', 'chart5_p2_correct3'],
                    decoys: ['chart5_p2_decoy1', 'chart5_p2_decoy2', 'chart5_p2_decoy3', 'chart5_p2_decoy4', 'chart5_p2_decoy5', 'chart5_p2_decoy6']
                },
                part3Options: {
                    correct: 'chart5_p3_correct',
                    decoys: ['chart5_p3_decoy1', 'chart5_p3_decoy2', 'chart5_p3_decoy3']
                }
            },
            
            // --- Placeholder Charts (6-20) ---
            // These now use placeholder keys
            {
                type: 'line',
                data: { labels: ['Q1', 'Q2', 'Q3', 'Q4'], datasets: [{ label: 'Product A', data: [10, 12, 15, 13], borderColor: 'rgba(255, 99, 132, 1)', fill: false }, { label: 'Product B', data: [8, 10, 11, 14], borderColor: 'rgba(54, 162, 235, 1)', fill: false }] },
                options: { plugins: { title: { display: true, text: 'Quarterly Product Performance' } } },
                part1Options: { correct: 'placeholder_p1_correct', decoys: ['placeholder_p1_decoy1', 'placeholder_p1_decoy2', 'placeholder_p1_decoy3'] },
                part2Options: { correct: ['placeholder_p2_correct1', 'placeholder_p2_correct2', 'placeholder_p2_correct3'], decoys: ['placeholder_p2_decoy1', 'placeholder_p2_decoy2', 'placeholder_p2_decoy3', 'placeholder_p2_decoy4', 'placeholder_p2_decoy5', 'placeholder_p2_decoy6'] },
                part3Options: { correct: 'placeholder_p3_correct', decoys: ['placeholder_p3_decoy1', 'placeholder_p3_decoy2', 'placeholder_p3_decoy3'] }
            },
            {
                type: 'radar',
                data: { labels: ['Speed', 'Reliability', 'Comfort', 'Safety', 'Fuel Eco'], datasets: [{ label: 'Car A', data: [7, 9, 6, 8, 7], backgroundColor: 'rgba(255, 99, 132, 0.2)', borderColor: 'rgba(255, 99, 132, 1)', pointBackgroundColor: 'rgba(255, 99, 132, 1)' }] },
                options: { plugins: { title: { display: true, text: 'Vehicle Attribute Rating' } } },
                part1Options: { correct: 'placeholder_p1_correct', decoys: ['placeholder_p1_decoy1', 'placeholder_p1_decoy2', 'placeholder_p1_decoy3'] },
                part2Options: { correct: ['placeholder_p2_correct1', 'placeholder_p2_correct2', 'placeholder_p2_correct3'], decoys: ['placeholder_p2_decoy1', 'placeholder_p2_decoy2', 'placeholder_p2_decoy3', 'placeholder_p2_decoy4', 'placeholder_p2_decoy5', 'placeholder_p2_decoy6'] },
                part3Options: { correct: 'placeholder_p3_correct', decoys: ['placeholder_p3_decoy1', 'placeholder_p3_decoy2', 'placeholder_p3_decoy3'] }
            },
            {
                type: 'scatter',
                data: { datasets: [{ label: 'Study Hours vs. Test Score', data: [{x: 1, y: 65}, {x: 2, y: 70}, {x: 3, y: 75}, {x: 4, y: 85}, {x: 5, y: 90}, {x: 2.5, y: 72}, {x: 3.5, y: 80}], backgroundColor: 'rgba(255, 99, 132, 0.6)' }] },
                options: { plugins: { title: { display: true, text: 'Study Hours vs. Test Score' } }, scales: { x: { title: { display: true, text: 'Hours Studied' } }, y: { title: { display: true, text: 'Test Score (%)' } } } },
                part1Options: { correct: 'placeholder_p1_correct', decoys: ['placeholder_p1_decoy1', 'placeholder_p1_decoy2', 'placeholder_p1_decoy3'] },
                part2Options: { correct: ['placeholder_p2_correct1', 'placeholder_p2_correct2', 'placeholder_p2_correct3'], decoys: ['placeholder_p2_decoy1', 'placeholder_p2_decoy2', 'placeholder_p2_decoy3', 'placeholder_p2_decoy4', 'placeholder_p2_decoy5', 'placeholder_p2_decoy6'] },
                part3Options: { correct: 'placeholder_p3_correct', decoys: ['placeholder_p3_decoy1', 'placeholder_p3_decoy2', 'placeholder_p3_decoy3'] }
            },
            {
                type: 'polarArea',
                data: { labels: ['Sci-Fi', 'Comedy', 'Drama', 'Action', 'Horror'], datasets: [{ label: 'Movie Genre Popularity', data: [12, 19, 10, 15, 7], backgroundColor: ['rgba(255, 99, 132, 0.5)', 'rgba(54, 162, 235, 0.5)', 'rgba(255, 206, 86, 0.5)', 'rgba(75, 192, 192, 0.5)', 'rgba(153, 102, 255, 0.5)'] }] },
                options: { plugins: { title: { display: true, text: 'Movie Genre Popularity' } } },
                part1Options: { correct: 'placeholder_p1_correct', decoys: ['placeholder_p1_decoy1', 'placeholder_p1_decoy2', 'placeholder_p1_decoy3'] },
                part2Options: { correct: ['placeholder_p2_correct1', 'placeholder_p2_correct2', 'placeholder_p2_correct3'], decoys: ['placeholder_p2_decoy1', 'placeholder_p2_decoy2', 'placeholder_p2_decoy3', 'placeholder_p2_decoy4', 'placeholder_p2_decoy5', 'placeholder_p2_decoy6'] },
                part3Options: { correct: 'placeholder_p3_correct', decoys: ['placeholder_p3_decoy1', 'placeholder_p3_decoy2', 'placeholder_p3_decoy3'] }
            },
            {
                type: 'bar',
                data: { labels: ['Region 1', 'Region 2', 'Region 3'], datasets: [{ label: 'Q1', data: [100, 120, 150], backgroundColor: 'rgba(255, 99, 132, 0.5)' }, { label: 'Q2', data: [110, 130, 140], backgroundColor: 'rgba(54, 162, 235, 0.5)' }] },
                options: { scales: { x: { stacked: true }, y: { stacked: true } }, plugins: { title: { display: true, text: 'Regional Sales by Quarter' } } },
                part1Options: { correct: 'placeholder_p1_correct', decoys: ['placeholder_p1_decoy1', 'placeholder_p1_decoy2', 'placeholder_p1_decoy3'] },
                part2Options: { correct: ['placeholder_p2_correct1', 'placeholder_p2_correct2', 'placeholder_p2_correct3'], decoys: ['placeholder_p2_decoy1', 'placeholder_p2_decoy2', 'placeholder_p2_decoy3', 'placeholder_p2_decoy4', 'placeholder_p2_decoy5', 'placeholder_p2_decoy6'] },
                part3Options: { correct: 'placeholder_p3_correct', decoys: ['placeholder_p3_decoy1', 'placeholder_p3_decoy2', 'placeholder_p3_decoy3'] }
            },
            {
                type: 'bubble',
                data: { datasets: [{ label: 'Product Analysis', data: [{x: 10, y: 20, r: 15}, {x: 15, y: 15, r: 25}, {x: 7, y: 30, r: 10}, {x: 12, y: 10, r: 20}], backgroundColor: 'rgba(255, 159, 64, 0.6)' }] },
                options: { plugins: { title: { display: true, text: 'Product Analysis (Sales vs. Profit vs. Market Share)' } }, scales: { x: { title: { display: true, text: 'Sales (units)' } }, y: { title: { display: true, text: 'Profit (%)' } } } },
                part1Options: { correct: 'placeholder_p1_correct', decoys: ['placeholder_p1_decoy1', 'placeholder_p1_decoy2', 'placeholder_p1_decoy3'] },
                part2Options: { correct: ['placeholder_p2_correct1', 'placeholder_p2_correct2', 'placeholder_p2_correct3'], decoys: ['placeholder_p2_decoy1', 'placeholder_p2_decoy2', 'placeholder_p2_decoy3', 'placeholder_p2_decoy4', 'placeholder_p2_decoy5', 'placeholder_p2_decoy6'] },
                part3Options: { correct: 'placeholder_p3_correct', decoys: ['placeholder_p3_decoy1', 'placeholder_p3_decoy2', 'placeholder_p3_decoy3'] }
            },
            {
                type: 'line',
                data: { labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'], datasets: [{ label: 'Daily Page Views', data: [1200, 1300, 1100, 1400, 1600, 1500, 1700], fill: true, backgroundColor: 'rgba(75, 192, 192, 0.2)', borderColor: 'rgba(75, 192, 192, 1)', tension: 0.3 }] },
                options: { plugins: { title: { display: true, text: 'Daily Page Views' } } },
                part1Options: { correct: 'placeholder_p1_correct', decoys: ['placeholder_p1_decoy1', 'placeholder_p1_decoy2', 'placeholder_p1_decoy3'] },
                part2Options: { correct: ['placeholder_p2_correct1', 'placeholder_p2_correct2', 'placeholder_p2_correct3'], decoys: ['placeholder_p2_decoy1', 'placeholder_p2_decoy2', 'placeholder_p2_decoy3', 'placeholder_p2_decoy4', 'placeholder_p2_decoy5', 'placeholder_p2_decoy6'] },
                part3Options: { correct: 'placeholder_p3_correct', decoys: ['placeholder_p3_decoy1', 'placeholder_p3_decoy2', 'placeholder_p3_decoy3'] }
            },
            {
                type: 'radar',
                data: { labels: ['Customer Service', 'Price', 'Quality', 'Selection', 'Speed'], datasets: [{ label: 'Store A', data: [8, 6, 9, 7, 8], backgroundColor: 'rgba(255, 99, 132, 0.2)', borderColor: 'rgba(255, 99, 132, 1)' }, { label: 'Store B', data: [6, 9, 7, 8, 6], backgroundColor: 'rgba(54, 162, 235, 0.2)', borderColor: 'rgba(54, 162, 235, 1)' }] },
                options: { plugins: { title: { display: true, text: 'Competitor Comparison' } } },
                part1Options: { correct: 'placeholder_p1_correct', decoys: ['placeholder_p1_decoy1', 'placeholder_p1_decoy2', 'placeholder_p1_decoy3'] },
                part2Options: { correct: ['placeholder_p2_correct1', 'placeholder_p2_correct2', 'placeholder_p2_correct3'], decoys: ['placeholder_p2_decoy1', 'placeholder_p2_decoy2', 'placeholder_p2_decoy3', 'placeholder_p2_decoy4', 'placeholder_p2_decoy5', 'placeholder_p2_decoy6'] },
                part3Options: { correct: 'placeholder_p3_correct', decoys: ['placeholder_p3_decoy1', 'placeholder_p3_decoy2', 'placeholder_p3_decoy3'] }
            },
            {
                type: 'bar',
                data: { labels: ['Team A', 'Team B', 'Team C'], datasets: [{ label: 'Points Scored', data: [85, 92, 78], backgroundColor: ['rgba(255, 99, 132, 0.6)', 'rgba(54, 162, 235, 0.6)', 'rgba(255, 206, 86, 0.6)'] }] },
                options: { plugins: { title: { display: true, text: 'Team Scores (Data Table Visual)' } } },
                part1Options: { correct: 'placeholder_p1_correct', decoys: ['placeholder_p1_decoy1', 'placeholder_p1_decoy2', 'placeholder_p1_decoy3'] },
                part2Options: { correct: ['placeholder_p2_correct1', 'placeholder_p2_correct2', 'placeholder_p2_correct3'], decoys: ['placeholder_p2_decoy1', 'placeholder_p2_decoy2', 'placeholder_p2_decoy3', 'placeholder_p2_decoy4', 'placeholder_p2_decoy5', 'placeholder_p2_decoy6'] },
                part3Options: { correct: 'placeholder_p3_correct', decoys: ['placeholder_p3_decoy1', 'placeholder_p3_decoy2', 'placeholder_p3_decoy3'] }
            },
            {
                type: 'bar',
                data: { labels: ['Jan', 'Feb', 'Mar', 'Apr'], datasets: [{ type: 'bar', label: 'Rainfall (mm)', data: [40, 45, 30, 50], backgroundColor: 'rgba(54, 162, 235, 0.6)' }, { type: 'line', label: 'Avg Temp (°C)', data: [5, 7, 10, 14], borderColor: 'rgba(255, 99, 132, 1)', fill: false, yAxisID: 'y1' }] },
                options: { plugins: { title: { display: true, text: 'Monthly Weather (Rainfall & Temp)' } }, scales: { y: { type: 'linear', display: true, position: 'left', title: { display: true, text: 'Rainfall (mm)'} }, y1: { type: 'linear', display: true, position: 'right', title: { display: true, text: 'Avg Temp (°C)'}, grid: { drawOnChartArea: false } } } },
                part1Options: { correct: 'placeholder_p1_correct', decoys: ['placeholder_p1_decoy1', 'placeholder_p1_decoy2', 'placeholder_p1_decoy3'] },
                part2Options: { correct: ['placeholder_p2_correct1', 'placeholder_p2_correct2', 'placeholder_p2_correct3'], decoys: ['placeholder_p2_decoy1', 'placeholder_p2_decoy2', 'placeholder_p2_decoy3', 'placeholder_p2_decoy4', 'placeholder_p2_decoy5', 'placeholder_p2_decoy6'] },
                part3Options: { correct: 'placeholder_p3_correct', decoys: ['placeholder_p3_decoy1', 'placeholder_p3_decoy2', 'placeholder_p3_decoy3'] }
            },
            {
                type: 'line',
                data: { labels: ['2018', '2019', '2020', '2021', '2022'], datasets: [{ label: 'Company Headcount', data: [50, 55, 55, 62, 62], borderColor: 'rgba(255, 159, 64, 1)', stepped: true, fill: false }] },
                options: { plugins: { title: { display: true, text: 'Company Headcount (Year-End)' } } },
                part1Options: { correct: 'placeholder_p1_correct', decoys: ['placeholder_p1_decoy1', 'placeholder_p1_decoy2', 'placeholder_p1_decoy3'] },
                part2Options: { correct: ['placeholder_p2_correct1', 'placeholder_p2_correct2', 'placeholder_p2_correct3'], decoys: ['placeholder_p2_decoy1', 'placeholder_p2_decoy2', 'placeholder_p2_decoy3', 'placeholder_p2_decoy4', 'placeholder_p2_decoy5', 'placeholder_p2_decoy6'] },
                part3Options: { correct: 'placeholder_p3_correct', decoys: ['placeholder_p3_decoy1', 'placeholder_p3_decoy2', 'placeholder_p3_decoy3'] }
            },
            {
                type: 'doughnut',
                data: { labels: ['Yes', 'No', 'Maybe'], datasets: [{ label: 'Survey 2020', data: [40, 50, 10], backgroundColor: ['#FF6384', '#36A2EB', '#FFCE56'].map(c => c + '80') }, { label: 'Survey 2021', data: [50, 40, 10], backgroundColor: ['#FF6384', '#36A2EB', '#FFCE56'] }] },
                options: { plugins: { title: { display: true, text: 'Survey Results (2020 vs 2021)' } } },
                part1Options: { correct: 'placeholder_p1_correct', decoys: ['placeholder_p1_decoy1', 'placeholder_p1_decoy2', 'placeholder_p1_decoy3'] },
                part2Options: { correct: ['placeholder_p2_correct1', 'placeholder_p2_correct2', 'placeholder_p2_correct3'], decoys: ['placeholder_p2_decoy1', 'placeholder_p2_decoy2', 'placeholder_p2_decoy3', 'placeholder_p2_decoy4', 'placeholder_p2_decoy5', 'placeholder_p2_decoy6'] },
                part3Options: { correct: 'placeholder_p3_correct', decoys: ['placeholder_p3_decoy1', 'placeholder_p3_decoy2', 'placeholder_p3_decoy3'] }
            },
            {
                type: 'scatter',
                data: { datasets: [{ label: 'Species A', data: [{x: 5, y: 10}, {x: 6, y: 12}, {x: 7, y: 11}], backgroundColor: 'rgba(255, 99, 132, 0.6)' }, { label: 'Species B', data: [{x: 8, y: 7}, {x: 9, y: 8}, {x: 10, y: 6}], backgroundColor: 'rgba(54, 162, 235, 0.6)' }] },
                options: { plugins: { title: { display: true, text: 'Height vs. Weight for Two Species' } }, scales: { x: { title: { display: true, text: 'Weight (kg)' } }, y: { title: { display: true, text: 'Height (cm)' } } } },
                part1Options: { correct: 'placeholder_p1_correct', decoys: ['placeholder_p1_decoy1', 'placeholder_p1_decoy2', 'placeholder_p1_decoy3'] },
                part2Options: { correct: ['placeholder_p2_correct1', 'placeholder_p2_correct2', 'placeholder_p2_correct3'], decoys: ['placeholder_p2_decoy1', 'placeholder_p2_decoy2', 'placeholder_p2_decoy3', 'placeholder_p2_decoy4', 'placeholder_p2_decoy5', 'placeholder_p2_decoy6'] },
                part3Options: { correct: 'placeholder_p3_correct', decoys: ['placeholder_p3_decoy1', 'placeholder_p3_decoy2', 'placeholder_p3_decoy3'] }
            },
            {
                type: 'doughnut',
                data: { labels: ['Current KPI', 'Target Remaining'], datasets: [{ data: [85, 15], backgroundColor: ['rgba(75, 192, 192, 0.6)', 'rgba(230, 230, 230, 0.6)'], circumference: 180, rotation: 270 }] },
                options: { cutout: '70%', plugins: { title: { display: true, text: 'Project Completion Gauge' } } },
                part1Options: { correct: 'placeholder_p1_correct', decoys: ['placeholder_p1_decoy1', 'placeholder_p1_decoy2', 'placeholder_p1_decoy3'] },
                part2Options: { correct: ['placeholder_p2_correct1', 'placeholder_p2_correct2', 'placeholder_p2_correct3'], decoys: ['placeholder_p2_decoy1', 'placeholder_p2_decoy2', 'placeholder_p2_decoy3', 'placeholder_p2_decoy4', 'placeholder_p2_decoy5', 'placeholder_p2_decoy6'] },
                part3Options: { correct: 'placeholder_p3_correct', decoys: ['placeholder_p3_decoy1', 'placeholder_p3_decoy2', 'placeholder_p3_decoy3'] }
            },
            {
                type: 'bar',
                data: { labels: ['Website Visits', 'Product Views', 'Added to Cart', 'Purchased'], datasets: [{ label: 'Sales Funnel', data: [1000, 500, 200, 100], backgroundColor: 'rgba(153, 102, 255, 0.6)' }] },
                options: { indexAxis: 'y', plugins: { title: { display: true, text: 'Sales Funnel' } }, scales: { x: { beginAtZero: true, stacked: true }, y: { stacked: true, reverse: true } } },
                part1Options: { correct: 'placeholder_p1_correct', decoys: ['placeholder_p1_decoy1', 'placeholder_p1_decoy2', 'placeholder_p1_decoy3'] },
                part2Options: { correct: ['placeholder_p2_correct1', 'placeholder_p2_correct2', 'placeholder_p2_correct3'], decoys: ['placeholder_p2_decoy1', 'placeholder_p2_decoy2', 'placeholder_p2_decoy3', 'placeholder_p2_decoy4', 'placeholder_p2_decoy5', 'placeholder_p2_decoy6'] },
                part3Options: { correct: 'placeholder_p3_correct', decoys: ['placeholder_p3_decoy1', 'placeholder_p3_decoy2', 'placeholder_p3_decoy3'] }
            },
        ];

        // --- App Logic ---
        let currentChartIndex = 0;
        let myChartInstance = null;
        let lessonChartInstances = {};
        let currentLanguage = 'en';
        
        // Main App Elements
        const ctx = document.getElementById('myChart').getContext('2d');
        const chartTitle = document.getElementById('chart-title');
        const nextBtn = document.getElementById('next-btn');
        const submitBtn = document.getElementById('submit-btn');
        const answerBox = document.getElementById('answer-box');
        const loader = document.getElementById('loader');
        const part1OptionsContainer = document.getElementById('part1-options');
        const part2OptionsContainer = document.getElementById('part2-options');
        const part3OptionsContainer = document.getElementById('part3-options');
        const obsCountSpan = document.getElementById('obs-count');
        const part2Label = document.getElementById('part2-label');
        const languageSelector = document.getElementById('language-selector');

        // Lesson Modal Elements
        const lessonModal = document.getElementById('lesson-modal');
        const lessonModalContent = document.getElementById('lesson-content');
        const openLessonBtn = document.getElementById('open-lesson-btn');
        const exitLessonBtn = document.getElementById('exit-lesson-btn');
        let lessonSlides = []; // Will be populated dynamically
        const lessonSlidesContainer = document.getElementById('lesson-slides-container');
        const lessonPrevBtn = document.getElementById('lesson-prev-btn');
        const lessonNextBtn = document.getElementById('lesson-next-btn');
        const slideIndicator = document.getElementById('slide-indicator');
        let currentSlide = 0;
        let totalSlides = 6; // We know this from our slide data

        // App State
        let selectedPart1 = null;
        let selectedPart2 = [];
        let selectedPart3 = null;
        let analysisChecked = false;

        // --- Utility Functions ---
        function shuffleArray(array) {
            let currentIndex = array.length, randomIndex;
            while (currentIndex != 0) {
                randomIndex = Math.floor(Math.random() * currentIndex);
                currentIndex--;
                [array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex]];
            }
            return array;
        }

        // --- Language & Translation ---
        function setLanguage(langCode) {
            currentLanguage = langCode;
            const t = translations[currentLanguage];

            // Update all static text elements
            document.querySelectorAll('[data-translate]').forEach(el => {
                const key = el.dataset.translate;
                if (t[key]) {
                    el.innerHTML = t[key];
                }
            });

            // Update elements with titles
            document.querySelectorAll('[data-translate-title]').forEach(el => {
                const key = el.dataset.translateTitle;
                if (t[key]) {
                    el.title = t[key];
                }
            });

            // Update dynamic text (buttons, labels)
            submitBtn.textContent = t.checkButton;
            
            // Re-render dynamic content
            renderLessonSlides();
            renderChart();
            updateObsCount(); // To update the label
        }

        // --- Main App Functions ---
        function renderChart() {
            // Reset state
            analysisChecked = false;
            selectedPart1 = null;
            selectedPart2 = [];
            selectedPart3 = null;
            updateObsCount();

            // Show loader, hide chart
            loader.style.display = 'block';
            ctx.canvas.style.display = 'none';

            // Hide answer and enable submit
            answerBox.classList.add('hidden');
            submitBtn.disabled = false;
            submitBtn.textContent = translations[currentLanguage].checkButton;

            // Clear old options
            part1OptionsContainer.innerHTML = '';
            part2OptionsContainer.innerHTML = '';
            part3OptionsContainer.innerHTML = '';

            // Destroy previous chart instance
            if (myChartInstance) {
                myChartInstance.destroy();
            }
            
            // Get the chart config
            const config = chartDataBank[currentChartIndex];
            
            // Update title
            const t = translations[currentLanguage];
            chartTitle.textContent = `${t.chart} ${currentChartIndex + 1} ${t.of} ${chartDataBank.length}`;
            
            // --- Populate Options ---
            // Part 1
            const p1options = shuffleArray([...config.part1Options.decoys, config.part1Options.correct]);
            p1options.forEach(key => {
                const text = t[key] || key;
                part1OptionsContainer.innerHTML += `<button class="option-btn part1-option" data-key="${key}">${text}</button>`;
            });

            // Part 2
            const p2options = shuffleArray([...config.part2Options.correct, ...config.part2Options.decoys]);
            p2options.forEach(key => {
                const text = t[key] || key;
                part2OptionsContainer.innerHTML += `<button class="option-btn part2-option" data-key="${key}">${text}</button>`;
            });

            // Part 3
            const p3options = shuffleArray([...config.part3Options.decoys, config.part3Options.correct]);
            p3options.forEach(key => {
                const text = t[key] || key;
                part3OptionsContainer.innerHTML += `<button class="option-btn part3-option" data-key="${key}">${text}</button>`;
            });
            
            // Set a brief timeout for loader
            setTimeout(() => {
                loader.style.display = 'none';
                ctx.canvas.style.display = 'block';

                myChartInstance = new Chart(ctx, {
                    type: config.type,
                    data: config.data,
                    options: { ...config.options, responsive: true, maintainAspectRatio: false }
                });
            }, 250);
        }

        function updateObsCount() {
            obsCountSpan.textContent = selectedPart2.length;
            // Update label text with translation
            part2Label.innerHTML = translations[currentLanguage].part2Label.replace('{0}', selectedPart2.length);

            const allPart2Buttons = document.querySelectorAll('.part2-option');
            
            if (selectedPart2.length >= 3) {
                // Disable all *unselected* buttons
                allPart2Buttons.forEach(btn => {
                    if (!btn.classList.contains('selected')) {
                        btn.classList.add('disabled');
                        btn.disabled = true;
                    }
                });
            } else {
                // Enable all buttons
                allPart2Buttons.forEach(btn => {
                    btn.classList.remove('disabled');
                    btn.disabled = false;
                });
            }
        }

        function checkAnswers() {
            if (analysisChecked) return;
            analysisChecked = true;
            submitBtn.disabled = true;
            submitBtn.textContent = translations[currentLanguage].checkButtonComplete;

            const config = chartDataBank[currentChartIndex];
            let score = 0;
            const maxScore = 1 + config.part2Options.correct.length + 1; // P1 + P2 + P3

            // Check Part 1
            const p1btn = document.querySelector(`.part1-option[data-key="${selectedPart1}"]`);
            if (selectedPart1 === config.part1Options.correct) {
                score++;
                if (p1btn) p1btn.classList.add('correct');
            } else {
                if (p1btn) p1btn.classList.add('incorrect');
                const correctP1Btn = document.querySelector(`.part1-option[data-key="${config.part1Options.correct}"]`);
                if (correctP1Btn) correctP1Btn.classList.add('correct');
            }
            
            // Check Part 2
            const p2btns = document.querySelectorAll('.part2-option');
            p2btns.forEach(btn => {
                const key = btn.dataset.key;
                const isSelected = selectedPart2.includes(key);
                const isCorrect = config.part2Options.correct.includes(key);

                if (isSelected) {
                    if (isCorrect) {
                        score++;
                        btn.classList.add('correct');
                    } else {
                        btn.classList.add('incorrect');
                    }
                } else if (isCorrect) {
                    // Highlight correct answers user *missed*
                    btn.classList.add('correct');
                    btn.classList.add('opacity-70'); // Dim it slightly
                }
            });

            // Check Part 3
            const p3btn = document.querySelector(`.part3-option[data-key="${selectedPart3}"]`);
            if (selectedPart3 === config.part3Options.correct) {
                score++;
                if (p3btn) p3btn.classList.add('correct');
            } else {
                if (p3btn) p3btn.classList.add('incorrect');
                const correctP3Btn = document.querySelector(`.part3-option[data-key="${config.part3Options.correct}"]`);
                if (correctP3Btn) correctP3Btn.classList.add('correct');
            }

            // Display score
            answerBox.textContent = `${translations[currentLanguage].scorePrefix} ${score} / ${maxScore}`;
            answerBox.classList.remove('hidden');
        }

        // --- Event Listeners ---
        
        // Part 1 Selection
        part1OptionsContainer.addEventListener('click', e => {
            if (analysisChecked || !e.target.classList.contains('part1-option')) return;
            
            // Remove selected from all
            part1OptionsContainer.querySelectorAll('.part1-option').forEach(btn => btn.classList.remove('selected'));
            
            // Add selected to clicked
            e.target.classList.add('selected');
            selectedPart1 = e.target.dataset.key;
        });

        // Part 2 Selection
        part2OptionsContainer.addEventListener('click', e => {
            if (analysisChecked || !e.target.classList.contains('part2-option')) return;
            
            const btn = e.target;
            const value = btn.dataset.key;

            if (btn.classList.contains('selected')) {
                // De-select
                btn.classList.remove('selected');
                selectedPart2 = selectedPart2.filter(item => item !== value);
            } else if (selectedPart2.length < 3) {
                // Select
                btn.classList.add('selected');
                selectedPart2.push(value);
            }
            updateObsCount();
        });

        // Part 3 Selection
        part3OptionsContainer.addEventListener('click', e => {
            if (analysisChecked || !e.target.classList.contains('part3-option')) return;
            
            part3OptionsContainer.querySelectorAll('.part3-option').forEach(btn => btn.classList.remove('selected'));
            e.target.classList.add('selected');
            selectedPart3 = e.target.dataset.key;
        });
        
        // Control Buttons
        nextBtn.addEventListener('click', () => {
            currentChartIndex = (currentChartIndex + 1) % chartDataBank.length;
            renderChart();
        });

        submitBtn.addEventListener('click', checkAnswers);

        // Language Selector
        languageSelector.addEventListener('change', (e) => {
            setLanguage(e.target.value);
        });

        // --- Lesson Modal Logic ---

        // This function builds the lesson slides HTML from the translations
        function renderLessonSlides() {
            const t = translations[currentLanguage];
            lessonSlidesContainer.innerHTML = `
                <!-- Slide 1: Intro -->
                <div class="lesson-slide" data-slide="0">
                    <h3 class="text-xl font-semibold mb-3">${t.slide0_title}</h3>
                    <p class="text-gray-700 mb-4">${t.slide0_p1}</p>
                    <p class="text-gray-700 mb-4">${t.slide0_p2}</p>
                    <h4 class="font-semibold text-gray-800 mb-2">${t.slide0_taskTitle}</h4>
                    <ul class="list-disc list-outside pl-5 text-gray-700 space-y-1">
                        <li>${t.slide0_task1}</li>
                        <li>${t.slide0_task2}</li>
                        <li>${t.slide0_task3}</li>
                    </ul>
                </div>

                <!-- Slide 2: Bar Charts -->
                <div class="lesson-slide" data-slide="1">
                    <h3 class="text-xl font-semibold mb-3">${t.slide1_title}</h3>
                    <p class="text-gray-700 mb-4">${t.slide1_p1}</p>
                    <div class="w-full h-48 bg-white border rounded-lg p-2 mb-4"><canvas id="lesson-chart-bar"></canvas></div>
                    <ul class="list-disc list-outside pl-5 text-gray-700 space-y-1">
                        <li>${t.slide1_read}</li>
                        <li>${t.slide1_obs}</li>
                        <li>${t.slide1_conc}</li>
                    </ul>
                </div>

                <!-- Slide 3: Line Charts -->
                <div class="lesson-slide" data-slide="2">
                    <h3 class="text-xl font-semibold mb-3">${t.slide2_title}</h3>
                    <p class="text-gray-700 mb-4">${t.slide2_p1}</p>
                    <div class="w-full h-48 bg-white border rounded-lg p-2 mb-4"><canvas id="lesson-chart-line"></canvas></div>
                    <ul class="list-disc list-outside pl-5 text-gray-700 space-y-1">
                        <li>${t.slide2_read}</li>
                        <li>${t.slide2_obs}</li>
                        <li>${t.slide2_conc}</li>
                    </ul>
                </div>

                <!-- Slide 4: Pie Charts -->
                <div class="lesson-slide" data-slide="3">
                    <h3 class="text-xl font-semibold mb-3">${t.slide3_title}</h3>
                    <p class="text-gray-700 mb-4">${t.slide3_p1}</p>
                    <div class="w-full h-48 bg-white border rounded-lg p-2 mb-4 flex justify-center"><div class="w-48"><canvas id="lesson-chart-pie"></canvas></div></div>
                    <ul class="list-disc list-outside pl-5 text-gray-700 space-y-1">
                        <li>${t.slide3_read}</li>
                        <li>${t.slide3_obs}</li>
                        <li>${t.slide3_conc}</li>
                    </ul>
                </div>

                <!-- Slide 5: Scatter Plots -->
                <div class="lesson-slide" data-slide="4">
                    <h3 class="text-xl font-semibold mb-3">${t.slide4_title}</h3>
                    <p class="text-gray-700 mb-4">${t.slide4_p1}</p>
                    <div class="w-full h-48 bg-white border rounded-lg p-2 mb-4"><canvas id="lesson-chart-scatter"></canvas></div>
                    <ul class="list-disc list-outside pl-5 text-gray-700 space-y-1">
                        <li>${t.slide4_read}</li>
                        <li>${t.slide4_obs}</li>
                        <li>${t.slide4_conc}</li>
                    </ul>
                </div>
                
                <!-- Slide 6: Tips -->
                <div class="lesson-slide" data-slide="5">
                    <h3 class="text-xl font-semibold mb-3">${t.slide5_title}</h3>
                    <h4 class="font-semibold text-gray-800 mb-2">${t.slide5_obs_title}</h4>
                    <ul class="list-disc list-outside pl-5 text-gray-700 space-y-1 mb-4">
                        <li>${t.slide5_obs1}</li>
                        <li>${t.slide5_obs2}</li>
                        <li>${t.slide5_obs3}</li>
                    </ul>
                    
                    <h4 class="font-semibold text-gray-800 mb-2">${t.slide5_conc_title}</h4>
                    <ul class="list-disc list-outside pl-5 text-gray-700 space-y-1">
                        <li>${t.slide5_conc1}</li>
                        <li>${t.slide5_conc2}</li>
                        <li>${t.slide5_conc3}</li>
                    </ul>
                </div>
            `;
            // Re-select the slides now that they exist
            lessonSlides = document.querySelectorAll('.lesson-slide');
            totalSlides = lessonSlides.length;
        }

        function showSlide(slideIndex) {
            lessonSlides.forEach((slide, index) => {
                if (index === slideIndex) {
                    slide.classList.add('active');
                } else {
                    slide.classList.remove('active');
                }
            });
            slideIndicator.textContent = translations[currentLanguage].slideIndicator
                .replace('{0}', slideIndex + 1)
                .replace('{1}', totalSlides);
            lessonPrevBtn.disabled = (slideIndex === 0);
            lessonNextBtn.disabled = (slideIndex === totalSlides - 1);
        }

        function openLesson() {
            lessonModal.classList.remove('hidden');
            setTimeout(() => {
                lessonModal.classList.remove('opacity-0');
                lessonModalContent.classList.remove('scale-95', 'opacity-0');
            }, 10);
            
            currentSlide = 0;
            showSlide(currentSlide);
            renderLessonCharts(); // Render charts when modal opens
        }

        function closeLesson() {
            lessonModal.classList.add('opacity-0');
            lessonModalContent.classList.add('scale-95', 'opacity-0');
            setTimeout(() => lessonModal.classList.add('hidden'), 300);
        }

        openLessonBtn.addEventListener('click', openLesson);
        exitLessonBtn.addEventListener('click', closeLesson);

        lessonNextBtn.addEventListener('click', () => {
            if (currentSlide < totalSlides - 1) {
                currentSlide++;
                showSlide(currentSlide);
            }
        });

        lessonPrevBtn.addEventListener('click', () => {
            if (currentSlide > 0) {
                currentSlide--;
                showSlide(currentSlide);
            }
        });

        function renderLessonCharts() {
            // Destroy old instances if they exist
            Object.values(lessonChartInstances).forEach(chart => chart.destroy());
            const t = translations[currentLanguage];

            // Bar
            lessonChartInstances.bar = new Chart(document.getElementById('lesson-chart-bar').getContext('2d'), {
                type: 'bar', data: { labels: [t.slide1_chart_catA, t.slide1_chart_catB, t.slide1_chart_catC], datasets: [{ label: t.slide1_chart_label, data: [20, 50, 10], backgroundColor: 'rgba(54, 162, 235, 0.6)' }] }, options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } } }
            });
            // Line
            lessonChartInstances.line = new Chart(document.getElementById('lesson-chart-line').getContext('2d'), {
                type: 'line', data: { labels: ['Jan', 'Feb', 'Mar', 'Apr'], datasets: [{ label: t.slide2_chart_label, data: [10, 20, 15, 45], borderColor: 'rgba(75, 192, 192, 1)', tension: 0.1 }] }, options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } } }
            });
            // Pie
            lessonChartInstances.pie = new Chart(document.getElementById('lesson-chart-pie').getContext('2d'), {
                type: 'pie', data: { labels: [t.slide3_chart_red, t.slide3_chart_blue, t.slide3_chart_yellow], datasets: [{ data: [50, 30, 20], backgroundColor: ['rgba(255, 99, 132, 0.6)', 'rgba(54, 162, 235, 0.6)', 'rgba(255, 206, 86, 0.6)'] }] }, options: { responsive: true, maintainAspectRatio: false }
            });
            // Scatter
            lessonChartInstances.scatter = new Chart(document.getElementById('lesson-chart-scatter').getContext('2d'), {
                type: 'scatter', data: { datasets: [{ label: t.slide4_chart_label, data: [{x: 1, y: 2}, {x: 2, y: 3}, {x: 3, y: 5}, {x: 4, y: 4}, {x: 5, y: 7}], backgroundColor: 'rgba(255, 99, 132, 0.6)' }] }, options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } } }
            });
        }

        // Initial render on page load
        window.addEventListener('load', () => {
            setLanguage('en'); // Set default language and render everything
        });
    </script>
</body>
</html>
