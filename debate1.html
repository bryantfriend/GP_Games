<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PairSpective - Classroom Debate Game</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Custom Styles -->
    <style>
        @keyframes fade-in {
          from { opacity: 0; transform: translateY(10px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
          animation: fade-in 0.5s ease-out forwards;
        }
        .animate-slide-up {
          animation: fade-in 0.7s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
        }
        .animate-bounce-slow {
          animation: bounce 3s infinite;
        }
        @keyframes bounce {
            0%, 100% { transform: translateY(-5%); animation-timing-function: cubic-bezier(0.8,0,1,1); }
            50% { transform: translateY(0); animation-timing-function: cubic-bezier(0,0,0.2,1); }
        }
        .perspective-1000 {
          perspective: 1000px;
        }
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1; 
        }
        ::-webkit-scrollbar-thumb {
            background: #c7c7c7; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8; 
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 font-sans">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- Icon System (Replacing Lucide Import) ---
        const Icon = ({ path, size = 24, className = "", ...props }) => (
            <svg 
                xmlns="http://www.w3.org/2000/svg" 
                width={size} 
                height={size} 
                viewBox="0 0 24 24" 
                fill="none" 
                stroke="currentColor" 
                strokeWidth="2" 
                strokeLinecap="round" 
                strokeLinejoin="round" 
                className={className} 
                {...props}
            >
                <g dangerouslySetInnerHTML={{ __html: path }} />
            </svg>
        );

        // Icon Paths
        const icons = {
            MessageCircle: '<path d="M7.9 20A9 9 0 1 0 4 16.1L2 22Z" />',
            Users: '<path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" /><circle cx="9" cy="7" r="4" /><path d="M22 21v-2a4 4 0 0 0-3-3.87" /><path d="M16 3.13a4 4 0 0 1 0 7.75" />',
            ArrowRight: '<path d="M5 12h14" /><path d="m12 5 7 7-7 7" />',
            RefreshCw: '<path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8" /><path d="M21 3v5h-5" /><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16" /><path d="M8 16H3v5" />',
            Check: '<path d="M20 6 9 17l-5-5" />',
            BookOpen: '<path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z" /><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z" />',
            Shirt: '<path d="M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z" />',
            Smartphone: '<rect width="14" height="20" x="5" y="2" rx="2" ry="2" /><path d="M12 18h.01" />',
            TreePine: '<path d="m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z" /><path d="M12 22v-3" />',
            Zap: '<polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2" />',
            Mic: '<path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z" /><path d="M19 10v2a7 7 0 0 1-14 0v-2" /><line x1="12" x2="12" y1="19" y2="22" /><line x1="8" x2="16" y1="22" y2="22" />',
            Play: '<polygon points="5 3 19 12 5 21 5 3" />',
            Pause: '<rect width="4" height="16" x="6" y="4" /><rect width="4" height="16" x="14" y="4" />',
            RotateCcw: '<path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8" /><path d="M3 3v5h5" />',
            Lightbulb: '<path d="M15 14c.2-1 .7-1.7 1.5-2.5 1-1 1.5-2.4 1.5-3.8 0-3.52-2.86-6.3-6.3-6.28A6 6 0 0 0 6 14c0 1 .6 2.3 1.5 3.2 1.2.9 1.6 1.5 1.5 2.5" /><path d="M9 18h6" /><path d="M10 22h4" />',
            Trophy: '<path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6" /><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18" /><path d="M4 22h16" /><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22" /><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22" /><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z" />',
            Dices: '<rect width="12" height="12" x="2" y="10" rx="2" ry="2" /><path d="m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3.12l-3-3a2.24 2.24 0 0 0-3.12 0l-3.5 3.5" /><path d="M6 11.3a9 9 0 0 1 8.7 0" /><path d="M10.7 16a9 9 0 0 1 2.6 0" /><path d="M2 10l4.5-4.5" /><path d="m14 2 4.5 4.5" />',
            PawPrint: '<circle cx="11" cy="4" r="2" /><circle cx="18" cy="8" r="2" /><circle cx="20" cy="16" r="2" /><path d="M9 10a5 5 0 0 1 5 5v3.5a3.5 3.5 0 0 1-6.84 0 4 4 0 0 0-5-2 6 6 0 0 0-2.16-4 5 5 0 0 1 9-2.5Z" />',
            Sun: '<circle cx="12" cy="12" r="4" /><path d="M12 2v2" /><path d="M12 20v2" /><path d="m4.93 4.93 1.41 1.41" /><path d="m17.66 17.66 1.41 1.41" /><path d="M2 12h2" /><path d="M20 12h2" /><path d="m6.34 17.66-1.41 1.41" /><path d="m19.07 4.93-1.41 1.41" />',
            Film: '<rect width="18" height="18" x="3" y="3" rx="2" /><path d="M7 3v18" /><path d="M3 7.5h4" /><path d="M3 12h18" /><path d="M3 16.5h4" /><path d="M17 3v18" /><path d="M17 7.5h4" /><path d="M17 16.5h4" />',
            Building2: '<path d="M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z" /><path d="M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2" /><path d="M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2" /><path d="M10 6h4" /><path d="M10 10h4" /><path d="M10 14h4" /><path d="M10 18h4" />',
            Handshake: '<path d="m11 17 2 2a1 1 0 1 0 3-3" /><path d="m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 2 0l.47-.28c2.63-1.57 5.86-.27 7.21 2.9a2 2 0 0 0-3.28 2.6c1.1 1.1 1.1 2.88 0 3.98a2 2 0 0 0-3.03 3.03" /><path d="M12 22C6.5 22 2 17.5 2 12a10 10 0 0 1 5-9c4 0 7 2.5 7 9a5 5 0 0 1 10 0c0 3.9-2.6 7.1-6.3 8.3" />',
            Moon: '<path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z" />'
        };

        const MessageCircle = (props) => <Icon path={icons.MessageCircle} {...props} />;
        const Users = (props) => <Icon path={icons.Users} {...props} />;
        const ArrowRight = (props) => <Icon path={icons.ArrowRight} {...props} />;
        const RefreshCw = (props) => <Icon path={icons.RefreshCw} {...props} />;
        const Check = (props) => <Icon path={icons.Check} {...props} />;
        const BookOpen = (props) => <Icon path={icons.BookOpen} {...props} />;
        const Shirt = (props) => <Icon path={icons.Shirt} {...props} />;
        const Smartphone = (props) => <Icon path={icons.Smartphone} {...props} />;
        const TreePine = (props) => <Icon path={icons.TreePine} {...props} />;
        const Zap = (props) => <Icon path={icons.Zap} {...props} />;
        const Mic = (props) => <Icon path={icons.Mic} {...props} />;
        const Play = (props) => <Icon path={icons.Play} {...props} />;
        const Pause = (props) => <Icon path={icons.Pause} {...props} />;
        const RotateCcw = (props) => <Icon path={icons.RotateCcw} {...props} />;
        const Lightbulb = (props) => <Icon path={icons.Lightbulb} {...props} />;
        const Trophy = (props) => <Icon path={icons.Trophy} {...props} />;
        const Dices = (props) => <Icon path={icons.Dices} {...props} />;
        const PawPrint = (props) => <Icon path={icons.PawPrint} {...props} />;
        const Sun = (props) => <Icon path={icons.Sun} {...props} />;
        const Film = (props) => <Icon path={icons.Film} {...props} />;
        const Building2 = (props) => <Icon path={icons.Building2} {...props} />;
        const Handshake = (props) => <Icon path={icons.Handshake} {...props} />;
        const Moon = (props) => <Icon path={icons.Moon} {...props} />;

        // --- Data / Content ---

        const TOPICS = [
        { 
            id: 1, 
            title: 'School Uniforms', 
            icon: <Shirt size={48} />, 
            color: 'from-blue-500 to-indigo-600', 
            accent: 'bg-blue-500',
            question: "Do uniforms limit expression or build unity?",
            examples: {
            sideA: "Uniforms create equality and reduce bullying based on clothing brands.",
            sideB: "Uniforms suppress individuality and students can't express themselves.",
            sim: "Both aim to impact the school environment.",
            diff: "Conformity (Uniforms) vs. Freedom of Choice (No Uniforms)."
            }
        },
        { 
            id: 2, 
            title: 'Homework', 
            icon: <BookOpen size={48} />, 
            color: 'from-emerald-500 to-teal-600', 
            accent: 'bg-emerald-500',
            question: "Is homework essential practice or stealing free time?",
            examples: {
            sideA: "Homework reinforces what we learned in class so we don't forget.",
            sideB: "We spend 7 hours at school; home time should be for rest and family.",
            sim: "Both involve learning and time management.",
            diff: "Academic Practice vs. Mental Health/Rest."
            }
        },
        { 
            id: 3, 
            title: 'Phones in School', 
            icon: <Smartphone size={48} />, 
            color: 'from-purple-500 to-violet-600', 
            accent: 'bg-purple-500',
            question: "Distraction device or powerful tool?",
            examples: {
            sideA: "Phones allow instant research and learning apps in class.",
            sideB: "Notifications are too distracting and students stop paying attention.",
            sim: "Both acknowledge the power of technology.",
            diff: "Educational Tool vs. Social Distraction."
            }
        },
        { 
            id: 4, 
            title: 'Park vs. Mall', 
            icon: <TreePine size={48} />, 
            color: 'from-orange-400 to-red-500', 
            accent: 'bg-orange-500',
            question: "Nature and fresh air or shopping and food courts?",
            examples: {
            sideA: "Parks are free, healthy, and good for mental relaxation.",
            sideB: "Malls have air conditioning, food, and entertainment options.",
            sim: "Both are places to socialize with friends.",
            diff: "Outdoor/Active vs. Indoor/Consumerism."
            }
        },
        {
            id: 5,
            title: 'Cats vs. Dogs',
            icon: <PawPrint size={48} />,
            color: 'from-pink-500 to-rose-600',
            accent: 'bg-pink-500',
            question: "Which pet reigns supreme?",
            examples: {
            sideA: "Cats are independent, quiet, and perfect for busy people.",
            sideB: "Dogs are loyal protectors that encourage an active lifestyle.",
            sim: "Both provide companionship and reduce stress.",
            diff: "Independence (Cats) vs. Dependence/Activity (Dogs)."
            }
        },
        {
            id: 6,
            title: 'Summer vs. Winter',
            icon: <Sun size={48} />,
            color: 'from-amber-400 to-orange-500',
            accent: 'bg-amber-500',
            question: "Beach days or Snow days?",
            examples: {
            sideA: "Summer means freedom, swimming, and long sunny days.",
            sideB: "Winter brings cozy holidays, snow sports, and hot cocoa.",
            sim: "Both seasons dictate our activities and clothing.",
            diff: "Heat/Outdoors (Summer) vs. Cold/Cozy (Winter)."
            }
        },
        {
            id: 7,
            title: 'Books vs. Movies',
            icon: <Film size={48} />,
            color: 'from-cyan-500 to-blue-600',
            accent: 'bg-cyan-500',
            question: "Read the story or watch it?",
            examples: {
            sideA: "Books let you imagine the world and offer more detail.",
            sideB: "Movies are a shared visual experience with sound and action.",
            sim: "Both tell compelling stories to entertain us.",
            diff: "Active Imagination (Books) vs. Passive Viewing (Movies)."
            }
        },
        {
            id: 8,
            title: 'City vs. Country',
            icon: <Building2 size={48} />,
            color: 'from-slate-500 to-gray-700',
            accent: 'bg-slate-500',
            question: "Skyscrapers or Starry Skies?",
            examples: {
            sideA: "City life offers convenience, excitement, and diversity.",
            sideB: "Country life offers peace, nature, and a tight-knit community.",
            sim: "Both are environments where people build lives.",
            diff: "Fast-paced/Noise (City) vs. Slow-paced/Nature (Country)."
            }
        },
        {
            id: 9,
            title: 'Group vs. Solo',
            icon: <Handshake size={48} />,
            color: 'from-lime-500 to-green-600',
            accent: 'bg-lime-500',
            question: "Better together or better alone?",
            examples: {
            sideA: "Group work divides the task and sparks new ideas.",
            sideB: "Solo work allows total control and working at your own pace.",
            sim: "Both are methods to achieve a goal or learn.",
            diff: "Collaboration (Group) vs. Autonomy (Solo)."
            }
        },
        {
            id: 10,
            title: 'Early Bird vs. Night Owl',
            icon: <Moon size={48} />,
            color: 'from-indigo-800 to-purple-900',
            accent: 'bg-indigo-800',
            question: "When does the brain work best?",
            examples: {
            sideA: "Early birds get a peaceful, productive start to the day.",
            sideB: "Night owls find creative energy when the world is quiet.",
            sim: "Both utilize peak energy hours for productivity.",
            diff: "Morning Discipline vs. Late-Night Creativity."
            }
        }
        ];

        // --- Visual Effects ---

        const BackgroundPattern = () => (
        <div className="fixed inset-0 z-0 opacity-30 pointer-events-none overflow-hidden bg-slate-50">
            <div className="absolute top-0 left-0 w-full h-full bg-[radial-gradient(#cbd5e1_1px,transparent_1px)] [background-size:20px_20px] [mask-image:radial-gradient(ellipse_50%_50%_at_50%_50%,#000_70%,transparent_100%)]"></div>
            <div className="absolute top-[-10%] right-[-5%] w-96 h-96 rounded-full bg-purple-300 blur-3xl opacity-30 animate-pulse"></div>
            <div className="absolute bottom-[-10%] left-[-5%] w-96 h-96 rounded-full bg-blue-300 blur-3xl opacity-30 animate-pulse" style={{ animationDelay: '1s' }}></div>
        </div>
        );

        const Confetti = () => {
        const canvasRef = useRef(null);

        useEffect(() => {
            const canvas = canvasRef.current;
            const ctx = canvas.getContext('2d');
            let animationFrameId;
            const particles = [];

            const resize = () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            };
            
            window.addEventListener('resize', resize);
            resize();

            const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff'];

            for (let i = 0; i < 100; i++) {
            particles.push({
                x: Math.random() * canvas.width,
                y: Math.random() * canvas.height - canvas.height,
                vx: Math.random() * 4 - 2,
                vy: Math.random() * 4 + 2,
                color: colors[Math.floor(Math.random() * colors.length)],
                size: Math.random() * 5 + 2
            });
            }

            const draw = () => {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            particles.forEach(p => {
                p.x += p.vx;
                p.y += p.vy;
                if (p.y > canvas.height) p.y = -10;
                ctx.fillStyle = p.color;
                ctx.fillRect(p.x, p.y, p.size, p.size);
            });
            animationFrameId = requestAnimationFrame(draw);
            };

            draw();

            return () => {
            window.removeEventListener('resize', resize);
            cancelAnimationFrame(animationFrameId);
            };
        }, []);

        return <canvas ref={canvasRef} className="fixed inset-0 pointer-events-none z-50" />;
        };

        const VsGraphic = () => (
        <svg viewBox="0 0 200 200" className="w-24 h-24 md:w-32 md:h-32 animate-bounce-slow drop-shadow-xl">
            <circle cx="100" cy="100" r="90" fill="white" stroke="none" className="opacity-20" />
            <text x="100" y="115" textAnchor="middle" fontSize="80" fontWeight="900" fill="transparent" stroke="url(#vsGradient)" strokeWidth="3">VS</text>
            <text x="100" y="115" textAnchor="middle" fontSize="80" fontWeight="900" fill="url(#vsGradient)" className="animate-pulse">VS</text>
            <defs>
            <linearGradient id="vsGradient" x1="0" x2="0" y1="0" y2="1">
                <stop offset="0%" stopColor="#fbbf24" />
                <stop offset="100%" stopColor="#d97706" />
            </linearGradient>
            </defs>
        </svg>
        );

        const VennGraphic = ({ centerText, leftText, rightText, reveal }) => (
        <div className="relative w-full max-w-4xl h-80 md:h-96 flex items-center justify-center select-none scale-90 md:scale-100 my-4">
            {/* Left Circle */}
            <div className={`absolute left-0 md:left-12 w-64 h-64 md:w-80 md:h-80 rounded-full bg-blue-500/10 border-4 border-blue-400/50 flex items-center justify-center p-6 transition-all duration-700 ${reveal ? 'opacity-100 scale-100' : 'opacity-50 scale-95'}`}>
            <div className={`text-center transition-opacity duration-500 ${reveal ? 'opacity-100 delay-200' : 'opacity-0'}`}>
                <span className="inline-block px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs font-bold uppercase tracking-widest mb-3">Difference A</span>
                <p className="text-blue-900 font-bold text-lg leading-snug">{leftText}</p>
            </div>
            </div>
            
            {/* Right Circle */}
            <div className={`absolute right-0 md:right-12 w-64 h-64 md:w-80 md:h-80 rounded-full bg-red-500/10 border-4 border-red-400/50 flex items-center justify-center p-6 transition-all duration-700 ${reveal ? 'opacity-100 scale-100' : 'opacity-50 scale-95'}`}>
            <div className={`text-center transition-opacity duration-500 ${reveal ? 'opacity-100 delay-200' : 'opacity-0'}`}>
                <span className="inline-block px-2 py-1 bg-red-100 text-red-700 rounded text-xs font-bold uppercase tracking-widest mb-3">Difference B</span>
                <p className="text-red-900 font-bold text-lg leading-snug">{rightText}</p>
            </div>
            </div>

            {/* Intersection */}
            <div className={`absolute z-10 transition-all duration-700 ${reveal ? 'scale-110' : 'scale-90'}`}>
            <div className="text-center bg-white/95 backdrop-blur-md p-6 rounded-2xl shadow-xl border-2 border-purple-200 max-w-xs">
                <span className="block uppercase tracking-widest text-purple-600 mb-2 text-xs font-black">Similarity</span>
                {reveal ? (
                <p className="text-purple-900 font-black text-xl">{centerText}</p>
                ) : (
                <p className="text-purple-300 font-medium">?</p>
                )}
            </div>
            </div>
        </div>
        );

        // --- Utility Components ---

        const CountdownTimer = ({ initialSeconds = 120 }) => {
        const [seconds, setSeconds] = useState(initialSeconds);
        const [isActive, setIsActive] = useState(false);

        useEffect(() => {
            let interval = null;
            if (isActive && seconds > 0) {
            interval = setInterval(() => {
                setSeconds(seconds => seconds - 1);
            }, 1000);
            } else if (seconds === 0) {
            setIsActive(false);
            }
            return () => clearInterval(interval);
        }, [isActive, seconds]);

        const progress = (seconds / initialSeconds) * 100;
        const isUrgent = seconds < 30;

        return (
            <div className="flex flex-col items-center gap-2">
            <div className={`relative flex items-center gap-4 bg-white px-4 py-2 rounded-full shadow-lg border-2 transition-colors duration-300 ${isUrgent ? 'border-red-400 bg-red-50' : 'border-gray-200'}`}>
                
                {/* Progress Ring Background */}
                <div className="absolute bottom-0 left-0 h-1 bg-gray-100 w-full rounded-full overflow-hidden">
                <div className={`h-full transition-all duration-1000 ease-linear ${isUrgent ? 'bg-red-500' : 'bg-indigo-500'}`} style={{ width: `${progress}%` }} />
                </div>

                <div className={`font-mono text-3xl font-black w-24 text-center tabular-nums ${isUrgent ? 'text-red-600 animate-pulse' : 'text-gray-700'}`}>
                {Math.floor(seconds / 60)}:{seconds % 60 < 10 ? '0' : ''}{seconds % 60}
                </div>
                
                <div className="flex gap-1 relative z-10">
                <button onClick={() => setIsActive(!isActive)} className="p-2 bg-indigo-100 hover:bg-indigo-200 text-indigo-700 rounded-full transition-colors">
                    {isActive ? <Pause size={18} /> : <Play size={18} />}
                </button>
                <button onClick={() => { setIsActive(false); setSeconds(initialSeconds); }} className="p-2 bg-gray-100 hover:bg-gray-200 text-gray-600 rounded-full transition-colors">
                    <RotateCcw size={18} />
                </button>
                </div>
            </div>
            </div>
        );
        };

        // --- Phase Components ---

        const HomeScreen = ({ onStart }) => (
        <div className="flex flex-col items-center justify-center h-full text-center space-y-10 animate-fade-in relative z-10">
            <div className="relative group cursor-pointer" onClick={onStart}>
            <div className="absolute -inset-8 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 rounded-full opacity-20 blur-3xl group-hover:opacity-40 transition-opacity duration-500 animate-pulse"></div>
            <div className="relative bg-white p-10 rounded-[2.5rem] shadow-[0_20px_50px_rgba(0,0,0,0.1)] border border-white/50 backdrop-blur-sm transform transition-transform duration-300 group-hover:scale-105 group-hover:-rotate-3">
                <Users size={100} className="text-indigo-600" strokeWidth={1.5} />
            </div>
            </div>
            
            <div className="space-y-4">
            <h1 className="text-7xl md:text-9xl font-black text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 tracking-tighter mb-2 drop-shadow-sm">
                PairSpective
            </h1>
            <p className="text-2xl md:text-3xl text-slate-600 font-light">
                The Ultimate Class Debate Game
            </p>
            </div>

            <button 
            onClick={onStart}
            className="group relative px-12 py-6 bg-gray-900 text-white font-bold rounded-full shadow-2xl hover:shadow-[0_20px_40px_rgba(0,0,0,0.2)] transition-all transform hover:-translate-y-1 overflow-hidden"
            >
            <div className="absolute inset-0 bg-gradient-to-r from-indigo-600 to-purple-600 opacity-0 group-hover:opacity-100 transition-opacity duration-300" />
            <span className="relative z-10 flex items-center gap-3 text-2xl tracking-wide">
                Start Game <ArrowRight className="group-hover:translate-x-2 transition-transform" />
            </span>
            </button>
        </div>
        );

        const TopicSelection = ({ topics, onSelect, onBack }) => (
        <div className="flex flex-col h-full max-w-7xl mx-auto w-full animate-fade-in px-4">
            <div className="flex items-center justify-between mb-8">
            <button onClick={onBack} className="text-gray-400 hover:text-gray-800 font-bold flex items-center gap-2 transition-colors">
                ← Back
            </button>
            <h2 className="text-4xl font-black text-slate-800">Choose Your Battle</h2>
            <div className="w-24"></div>
            </div>
            
            <div className="grid grid-cols-1 md:grid-cols-2 gap-6 flex-1 content-start overflow-y-auto pb-8">
            {topics.map((topic) => (
                <button
                key={topic.id}
                onClick={() => onSelect(topic)}
                className="group relative h-72 focus:outline-none text-left perspective-1000"
                >
                <div className="absolute inset-0 bg-white rounded-3xl shadow-lg transition-all duration-300 group-hover:scale-[1.02] group-hover:shadow-2xl border border-slate-100 overflow-hidden flex flex-col md:flex-row">
                    {/* Color Bar / Icon Area */}
                    <div className={`h-32 md:h-full md:w-40 bg-gradient-to-br ${topic.color} p-6 flex items-center justify-center relative overflow-hidden`}>
                    <div className="absolute inset-0 bg-white opacity-10 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-white via-transparent to-transparent scale-150" />
                    <div className="text-white transform transition-transform duration-500 group-hover:scale-110 group-hover:rotate-6 relative z-10 drop-shadow-md">
                        {topic.icon}
                    </div>
                    </div>
                    
                    {/* Text Content */}
                    <div className="flex-1 p-8 flex flex-col justify-center">
                    <h3 className="text-3xl font-black text-slate-800 mb-3 group-hover:text-indigo-700 transition-colors">{topic.title}</h3>
                    <p className="text-slate-500 font-medium text-lg leading-relaxed">{topic.question}</p>
                    <div className="mt-6 flex items-center gap-2 text-sm font-bold text-indigo-400 opacity-0 group-hover:opacity-100 transition-opacity transform translate-y-2 group-hover:translate-y-0">
                        Play This Card <ArrowRight size={16} />
                    </div>
                    </div>
                </div>
                </button>
            ))}
            </div>
        </div>
        );

        const PerspectivePhase = ({ topic, onNext, onBack }) => {
        const [revealed, setRevealed] = useState(false);
        const [votesA, setVotesA] = useState(0);
        const [votesB, setVotesB] = useState(0);

        return (
            <div className="flex flex-col h-full max-w-7xl mx-auto w-full animate-fade-in pb-8 px-4">
            {/* Header */}
            <div className="flex flex-col md:flex-row items-center justify-between mb-6 bg-white/80 backdrop-blur-md p-4 rounded-3xl shadow-sm border border-white/50">
                <div className="flex items-center gap-4 mb-4 md:mb-0">
                <div className={`p-3 rounded-2xl bg-gradient-to-br ${topic.color} text-white shadow-lg`}>
                    {React.cloneElement(topic.icon, { size: 28 })}
                </div>
                <div>
                    <h2 className="text-2xl font-black text-slate-800">{topic.title}</h2>
                    <p className="text-slate-500 text-sm font-medium">Round 1: The Debate</p>
                </div>
                </div>
                <CountdownTimer initialSeconds={120} />
            </div>

            {/* Main Stage */}
            <div className="flex-1 grid grid-cols-1 md:grid-cols-[1fr_auto_1fr] gap-6 items-stretch">
                
                {/* Side A Card */}
                <div className="bg-white rounded-[2rem] shadow-xl border-2 border-blue-100 p-6 flex flex-col relative overflow-hidden group hover:border-blue-300 transition-colors">
                <div className="absolute top-0 left-0 w-full h-2 bg-blue-500" />
                <div className="flex justify-between items-start mb-6">
                    <h3 className="text-2xl font-black text-blue-600 uppercase tracking-wide">Perspective A</h3>
                    <div className="bg-blue-50 p-2 rounded-lg text-blue-400"><MessageCircle size={24} /></div>
                </div>
                
                <div className="flex-1 flex items-center justify-center text-center p-4">
                    {revealed ? (
                    <p className="text-2xl font-medium text-slate-700 animate-fade-in leading-relaxed">"{topic.examples.sideA}"</p>
                    ) : (
                    <div className="text-slate-300 flex flex-col items-center gap-2 animate-pulse">
                        <Users size={48} />
                        <span className="font-medium">Discuss with your partner...</span>
                    </div>
                    )}
                </div>

                {/* Voting A */}
                <div className="mt-6 pt-6 border-t border-blue-50 flex items-center justify-between bg-blue-50/50 -mx-6 -mb-6 p-4">
                    <span className="text-xs font-bold text-blue-400 uppercase">Class Vote</span>
                    <div className="flex items-center gap-3">
                    <button onClick={() => setVotesA(Math.max(0, votesA - 1))} className="w-8 h-8 rounded-full bg-white text-blue-600 shadow hover:bg-blue-100 font-bold">-</button>
                    <span className="text-2xl font-black text-blue-600 w-8 text-center">{votesA}</span>
                    <button onClick={() => setVotesA(votesA + 1)} className="w-8 h-8 rounded-full bg-blue-600 text-white shadow hover:bg-blue-700 font-bold">+</button>
                    </div>
                </div>
                </div>

                {/* VS Graphic */}
                <div className="flex items-center justify-center py-4 md:py-0">
                <VsGraphic />
                </div>

                {/* Side B Card */}
                <div className="bg-white rounded-[2rem] shadow-xl border-2 border-orange-100 p-6 flex flex-col relative overflow-hidden group hover:border-orange-300 transition-colors">
                <div className="absolute top-0 left-0 w-full h-2 bg-orange-500" />
                <div className="flex justify-between items-start mb-6">
                    <h3 className="text-2xl font-black text-orange-600 uppercase tracking-wide">Perspective B</h3>
                    <div className="bg-orange-50 p-2 rounded-lg text-orange-400"><MessageCircle size={24} className="scale-x-[-1]" /></div>
                </div>

                <div className="flex-1 flex items-center justify-center text-center p-4">
                    {revealed ? (
                    <p className="text-2xl font-medium text-slate-700 animate-fade-in leading-relaxed">"{topic.examples.sideB}"</p>
                    ) : (
                    <div className="text-slate-300 flex flex-col items-center gap-2 animate-pulse">
                        <Users size={48} />
                        <span className="font-medium">Discuss with your partner...</span>
                    </div>
                    )}
                </div>

                {/* Voting B */}
                <div className="mt-6 pt-6 border-t border-orange-50 flex items-center justify-between bg-orange-50/50 -mx-6 -mb-6 p-4">
                    <span className="text-xs font-bold text-orange-400 uppercase">Class Vote</span>
                    <div className="flex items-center gap-3">
                    <button onClick={() => setVotesB(Math.max(0, votesB - 1))} className="w-8 h-8 rounded-full bg-white text-orange-600 shadow hover:bg-orange-100 font-bold">-</button>
                    <span className="text-2xl font-black text-orange-600 w-8 text-center">{votesB}</span>
                    <button onClick={() => setVotesB(votesB + 1)} className="w-8 h-8 rounded-full bg-orange-600 text-white shadow hover:bg-orange-700 font-bold">+</button>
                    </div>
                </div>
                </div>
            </div>

            {/* Footer Controls */}
            <div className="mt-6 flex justify-between items-center">
                <button onClick={onBack} className="text-gray-400 hover:text-gray-800 font-bold text-lg px-4">← Back</button>
                
                <button 
                onClick={() => setRevealed(!revealed)}
                className="flex items-center gap-2 px-8 py-3 bg-yellow-100 text-yellow-800 hover:bg-yellow-200 rounded-full font-bold shadow-sm hover:shadow transition-all"
                >
                <Lightbulb size={20} /> {revealed ? 'Hide' : 'Show'} Ideas
                </button>

                <button 
                onClick={onNext} 
                className="group px-8 py-3 bg-slate-800 hover:bg-slate-900 text-white font-bold rounded-full shadow-lg hover:shadow-xl transition-all flex items-center gap-2"
                >
                Next Round <ArrowRight size={20} className="group-hover:translate-x-1 transition-transform" />
                </button>
            </div>
            </div>
        );
        };

        const AnalysisPhase = ({ topic, onNext, onBack }) => {
        const [revealed, setRevealed] = useState(false);

        return (
            <div className="flex flex-col h-full max-w-6xl mx-auto w-full animate-fade-in pb-8 px-4">
            {/* Header */}
            <div className="flex items-center justify-between mb-4 bg-white/50 backdrop-blur rounded-2xl p-4 border border-white">
                <div>
                <h2 className="text-2xl font-black text-slate-800">Compare & Contrast</h2>
                <p className="text-slate-500 text-sm">Find connections between the perspectives.</p>
                </div>
                <CountdownTimer initialSeconds={120} />
            </div>

            <div className="flex-1 flex flex-col items-center justify-center relative bg-white rounded-[3rem] shadow-xl border border-slate-100 p-4 overflow-hidden">
                <div className="absolute inset-0 bg-slate-50 opacity-50 bg-[radial-gradient(#e2e8f0_1px,transparent_1px)] [background-size:16px_16px]"></div>
                
                <VennGraphic 
                centerText={topic.examples.sim}
                leftText={topic.examples.diff}
                rightText={topic.examples.diff}
                reveal={revealed}
                />
            </div>

            <div className="mt-6 flex justify-between items-center">
                <button onClick={onBack} className="text-gray-400 hover:text-gray-800 font-bold text-lg px-4">← Back</button>
                
                <button 
                onClick={() => setRevealed(!revealed)}
                className="flex items-center gap-2 px-8 py-3 bg-yellow-100 text-yellow-800 hover:bg-yellow-200 rounded-full font-bold shadow-sm hover:shadow transition-all"
                >
                <Lightbulb size={20} /> {revealed ? 'Hide' : 'Reveal'} Analysis
                </button>

                <button 
                onClick={onNext} 
                className="group px-8 py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-full shadow-lg hover:shadow-xl transition-all flex items-center gap-2"
                >
                Final Discussion <Check size={20} />
                </button>
            </div>
            </div>
        );
        };

        const SummaryPhase = ({ topic, onRestart }) => {
        const [pickedGroup, setPickedGroup] = useState(null);
        const [isSpinning, setIsSpinning] = useState(false);
        const [showConfetti, setShowConfetti] = useState(false);

        useEffect(() => {
            setShowConfetti(true);
            const timer = setTimeout(() => setShowConfetti(false), 5000); // Confetti for 5s
            return () => clearTimeout(timer);
        }, []);

        const spinWheel = () => {
            setIsSpinning(true);
            setPickedGroup(null);
            let count = 0;
            const maxSpins = 20;
            const interval = setInterval(() => {
            setPickedGroup(Math.floor(Math.random() * 10) + 1);
            count++;
            if (count > maxSpins) {
                clearInterval(interval);
                setIsSpinning(false);
                // Final pick
                setPickedGroup(Math.floor(Math.random() * 8) + 1); // Assume 8 groups
            }
            }, 100);
        };

        return (
            <div className="relative flex flex-col items-center justify-center h-full max-w-5xl mx-auto w-full animate-slide-up text-center px-4">
            {showConfetti && <Confetti />}
            
            <div className="bg-white p-6 rounded-full shadow-2xl mb-6 animate-bounce-slow border-4 border-indigo-50">
                <Trophy size={64} className="text-yellow-500" fill="currentColor" />
            </div>
            
            <h2 className="text-5xl font-black text-slate-800 mb-4">Discussion Time!</h2>
            
            <div className="bg-white/80 backdrop-blur-md p-10 rounded-3xl border border-indigo-100 max-w-4xl w-full mb-8 shadow-xl relative overflow-hidden">
                <div className={`absolute top-0 left-0 w-full h-2 bg-gradient-to-r ${topic.color}`} />
                <h3 className="text-indigo-900 font-bold uppercase tracking-widest mb-4 opacity-60">The Big Question</h3>
                <p className="text-4xl md:text-5xl font-serif italic text-indigo-900 leading-tight">"{topic.question}"</p>
            </div>

            {/* Random Group Picker */}
            <div className="flex gap-4 items-center mb-12">
                <div className="bg-white rounded-2xl shadow-lg p-4 flex items-center gap-4 border border-slate-200">
                <div className="text-left">
                    <div className="text-xs font-bold text-slate-400 uppercase">Who Speaks?</div>
                    <div className="text-3xl font-black text-slate-800 min-w-[120px]">
                    {pickedGroup ? `Group ${pickedGroup}` : '???'}
                    </div>
                </div>
                <button 
                    onClick={spinWheel} 
                    disabled={isSpinning}
                    className="w-12 h-12 bg-indigo-100 text-indigo-600 rounded-xl flex items-center justify-center hover:bg-indigo-200 transition-colors disabled:opacity-50"
                >
                    <Dices size={24} className={isSpinning ? 'animate-spin' : ''} />
                </button>
                </div>
            </div>

            <button 
                onClick={onRestart}
                className="px-8 py-4 bg-slate-800 hover:bg-slate-900 text-white font-bold rounded-full transition-all shadow-lg flex items-center gap-3 text-lg group"
            >
                <RefreshCw size={20} className="group-hover:rotate-180 transition-transform duration-500" /> 
                Select New Topic
            </button>
            </div>
        );
        };

        // --- Main App Component ---

        const PairSpective = () => {
        const [step, setStep] = useState(0);
        const [selectedTopic, setSelectedTopic] = useState(null);

        const handleStart = () => setStep(1);
        
        const handleTopicSelect = (topic) => {
            setSelectedTopic(topic);
            setStep(2);
        };

        const nextStep = () => setStep(s => s + 1);
        const prevStep = () => setStep(s => Math.max(0, s - 1));
        
        const restart = () => {
            setStep(0);
            setSelectedTopic(null);
        };

        return (
            <div className="h-screen w-full bg-slate-50 text-slate-800 font-sans relative overflow-hidden flex flex-col">
            <BackgroundPattern />
            
            {/* Navbar */}
            <div className="relative z-20 w-full px-6 py-4 flex justify-between items-center bg-white/50 backdrop-blur-sm border-b border-white/50">
                <div className="flex items-center gap-3 font-black text-xl text-indigo-900 tracking-tight cursor-pointer" onClick={() => setStep(0)}>
                <div className="bg-gradient-to-br from-indigo-500 to-purple-600 text-white p-2 rounded-lg shadow-md">
                    <Users size={20} />
                </div>
                PairSpective
                </div>
                {step > 0 && (
                <div className="flex items-center gap-2">
                    {[1,2,3,4].map((s) => (
                        <div key={s} className={`h-2 rounded-full transition-all duration-500 ${s <= step ? 'w-8 bg-indigo-500' : 'w-2 bg-slate-200'}`} />
                    ))}
                </div>
                )}
            </div>

            {/* Content Area */}
            <main className="flex-1 relative z-10 w-full overflow-y-auto">
                <div className="min-h-full flex flex-col justify-center py-8">
                {step === 0 && <HomeScreen onStart={handleStart} />}
                
                {step === 1 && (
                    <TopicSelection 
                    topics={TOPICS} 
                    onSelect={handleTopicSelect} 
                    onBack={prevStep} 
                    />
                )}
                
                {step === 2 && selectedTopic && (
                    <PerspectivePhase 
                    topic={selectedTopic} 
                    onNext={nextStep} 
                    onBack={prevStep} 
                    />
                )}
                
                {step === 3 && selectedTopic && (
                    <AnalysisPhase 
                    topic={selectedTopic} 
                    onNext={nextStep} 
                    onBack={prevStep} 
                    />
                )}
                
                {step === 4 && selectedTopic && (
                    <SummaryPhase 
                    topic={selectedTopic} 
                    onRestart={restart} 
                    />
                )}
                </div>
            </main>
            </div>
        );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<PairSpective />);
    </script>
</body>
</html>
